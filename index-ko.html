<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>16BodyPersonalities</title>
  
  <link rel="stylesheet" href="styles.css">
</head>
<body data-theme="WAVE"> <header class="site-header">
  <a class="brand" href="index-ko.html">16Body<span>Personalities</span></a>

  <nav class="nav-links">
    <a href="index-ko.html" class="chip-btn">í™ˆ</a>
    <a href="gallery-ko.html" class="chip-btn">íƒ€ì… ê°¤ëŸ¬ë¦¬</a>
    <a href="contact-ko.html" class="chip-btn">ë¬¸ì˜í•˜ê¸°</a>
  </nav>

  <button class="hamburger" id="navOpen" aria-label="ë©”ë‰´" aria-controls="drawer" aria-expanded="false">
    <svg width="26" height="26" viewBox="0 0 24 24" aria-hidden="true">
      <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>
  </button>
</header>

<aside class="drawer" id="drawer" aria-hidden="true">
  <div class="drawer-head">
    <a class="drawer-brand">16Body<span>Personalities</span></a>
    <button class="drawer-close" id="navClose" aria-label="ë‹«ê¸°">
      <svg width="26" height="26" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
  </div>

  <nav class="drawer-links">
    <a href="index-ko.html" class="drawer-item">í™ˆ</a>
    <a href="app-ko.html" class="drawer-item">ì§„ë‹¨ ì‹œì‘í•˜ê¸°</a>
    <a href="gallery-ko.html" class="drawer-item">íƒ€ì… ê°¤ëŸ¬ë¦¬</a>
    <a href="privacy-ko.html" class="drawer-item">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
    <a href="terms-ko.html" class="drawer-item">ì´ìš©ì•½ê´€</a>
    <a href="contact-ko.html" class="drawer-item">ë¬¸ì˜í•˜ê¸°</a>
  </nav>
</aside>

<div class="scrim" id="scrim" hidden></div>
<div class="topbar-spacer"></div> <section class="card hero-card hero-cute">
  <div class="hero-bg">
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <div class="blob b3"></div>
  </div>

  <div class="hero-inner">

    <h2 class="hero-title">
      ë‹¹ì‹ ì˜ <span class="sparkle">Body</span> Personalities ì§„ë‹¨
    </h2>
    <p class="muted">16ê°€ì§€ ì²´í˜• ì§„ë‹¨ìœ¼ë¡œ ë‚˜ë§Œì˜ êµ¬ì¡°ë¥¼ ì•Œì•„ë³´ì„¸ìš”.</p>

    <div class="controls cute-cta">
      <button class="btn-cta" onclick="location.href='app-ko.html'">ì§„ë‹¨ ì‹œì‘í•˜ê¸°</button>
      <button class="btn-ghost" onclick="location.href='gallery-ko.html'">íƒ€ì… ë³´ê¸°</button>
    </div>

    <div class="emoji-ribbon full" id="emojiRibbon" aria-hidden="true">
  <div class="ribbon-track" id="ribbonTrack">
    <span class="loop">ğŸ¨ ğŸº ğŸ¦‹ ğŸ¹ ğŸ•Š ğŸ» ğŸ¦„ ğŸ¦… ğŸ¦Š ğŸ¦Œ ğŸ† ğŸ¦ˆ ğŸ… ğŸ¦š ğŸ¬ ğŸ¦‰</span>
  </div>
</div>
<section class="about-16bp cute-luxe" id="about-16bp">
  <div class="about-frame">
    <span class="corner c1"></span>
    <span class="corner c2"></span>
    <span class="corner c3"></span>
    <span class="corner c4"></span>

    <div class="about-head">
      <span class="about-badge">Our Philosophy</span>
      <h3 class="about-title">
        ê³¨ê²©ì„ 'í‹€'ì´ ì•„ë‹Œ 'ê°œì„±'ìœ¼ë¡œ ë°”ë¼ë³´ëŠ”, 16BodyPersonalities
      </h3>
      <p class="about-sub">
        ìš°ë¦¬ëŠ” ë‹¹ì‹ ì˜ ì‹ ì²´ì— ê¹ƒë“  "êµ¬ì¡°ì  ë‰˜ì•™ìŠ¤"ë¥¼ ì„¬ì„¸í•˜ê²Œ ì–¸ì–´í™”í•©ë‹ˆë‹¤.
      </p>
    </div>

    <div class="about-body">
      <p>
        ì„¸ìƒì—ëŠ” <b>3ê°€ì§€ íƒ€ì…</b>ì´ë‚˜ <b>8ê°€ì§€ íƒ€ì…</b>ì˜ ê³¨ê²© ì§„ë‹¨ì´ ë„ë¦¬ ì•Œë ¤ì ¸ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹¤ì œ ì‹ ì²´ëŠ” í›¨ì”¬ ì„¬ì„¸í•˜ê³  í’ë¶€í•©ë‹ˆë‹¤.
        ê°™ì€ ì–´ê¹¨ë„ˆë¹„ë¼ë„ ë‘¥ê·¼ ëŠë‚Œ, ë¼ˆì˜ ì¡´ì¬ê°, ë¬´ê²Œì¤‘ì‹¬, ê·¼ìœ¡ í˜•íƒœì˜ ë¯¸ì„¸í•œ ì°¨ì´ë¡œ ì¸í•´ í’ê¸°ëŠ” ì¸ìƒì€ í¬ê²Œ ë‹¬ë¼ì§‘ë‹ˆë‹¤.
      </p>
      <p>
        ê¸°ì¡´ì˜ "ìƒì"ì— ë¶„ë¥˜í• ìˆ˜ë¡ ë‹¹ì‹ ë§Œì˜ ê³ ìœ í•œ ì§ˆê°ì€ ì‚¬ë¼ì ¸ ë²„ë¦½ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ê·¸ ê³¼ì œë¥¼ ë§ˆì£¼í•˜ê³ ,
        ê³¨ê²©ì„ <b>4ê°€ì§€ ì¶• (Frame / Surface / Balance / Line)</b>ìœ¼ë¡œ ë¶„í•´í–ˆìŠµë‹ˆë‹¤. ê° ì¶•ì˜ ê°•ì•½ ì¡°í•©ì„ í†µí•´, ë‹¨ìˆœí•œ í™•ì¥ì´ ì•„ë‹Œ
        <b>16ê°€ì§€ í¼ìŠ¤ë„ë¦¬í‹°</b>ë¥¼ ê·¸ë ¤ëƒˆìŠµë‹ˆë‹¤.
      </p>
      <p>
        16BodyPersonalitiesëŠ” ë‹¹ì‹ ì„ í‹€ì— ê°€ë‘ëŠ” ì§„ë‹¨ì´ ì•„ë‹™ë‹ˆë‹¤.<br/>
        ë‹¹ì‹ ì˜ "ë³¸ì—°ì˜ êµ¬ì¡°ë¯¸"ë¥¼ <em>ë¶€ë“œëŸ½ê³ , ì •ë°€í•˜ê²Œ, ê·¸ë¦¬ê³  ê³ ê¸‰ìŠ¤ëŸ½ê²Œ</em> ëŒì–´ë‚´ê¸° ìœ„í•œ ìƒˆë¡œìš´ ì–¸ì–´ì…ë‹ˆë‹¤.
      </p>
    </div>

    <div class="about-actions">
      <a class="btn luxe" href="app-ko.html">ì§„ë‹¨ ì‹œì‘í•˜ê¸°</a>
      <a class="btn ghost" href="gallery-ko.html" aria-label="íƒ€ì… ë³´ê¸°">
        íƒ€ì… ë³´ê¸°
      </a>
    </div>
  </div>
</section>
</div>
</section>

<footer class="footer">
      <span class="small">Â© 2025 16BodyPersonalities Project</span>
      <span>
    <a class="muted" href="terms-ko.html">Terms</a> ãƒ»
    <a class="muted" href="privacy-ko.html">Privacy</a>
  </span>
</footer>
    </footer>
  </div>
  
  <script>
/* ==== AWS API ì—”ë“œí¬ì¸íŠ¸ ==== */
const API_URL = "https://uk952hkt2e.execute-api.ap-northeast-1.amazonaws.com/prod";

/* ==== 16íƒ€ì… (ë™ë¬¼ ì´ë¦„ í•œêµ­ì–´ ë³€í™˜) ==== */
const CODE_META = {
  BNLS:{emoji:'ğŸ¨', label:'ê³¨ê²© ì½”ì•Œë¼'},    MNLC:{emoji:'ğŸº', label:'ê³¨ê²© ëŠ‘ëŒ€'},
  MWLC:{emoji:'ğŸ¦‹', label:'ê³¨ê²© ë‚˜ë¹„'},      MWLS:{emoji:'ğŸ¹', label:'ê³¨ê²© í–„ìŠ¤í„°'},
  MNLS:{emoji:'ğŸ•Š', label:'ê³¨ê²© ë¹„ë‘˜ê¸°'},    BNLC:{emoji:'ğŸ»', label:'ê³¨ê²© í…Œë””'},
  BWUC:{emoji:'ğŸ¦„', label:'ê³¨ê²© ìœ ë‹ˆì½˜'},    BWUS:{emoji:'ğŸ¦…', label:'ê³¨ê²© ë…ìˆ˜ë¦¬'},
  BWLC:{emoji:'ğŸ¦Š', label:'ê³¨ê²© ì—¬ìš°'},      BWLS:{emoji:'ğŸ¦Œ', label:'ê³¨ê²© ë°¤ë¹„'},
  BNUS:{emoji:'ğŸ†', label:'ê³¨ê²© í‘œë²”'},      MWUC:{emoji:'ğŸ¦ˆ', label:'ê³¨ê²© ìƒì–´'},
  MNUC:{emoji:'ğŸ…', label:'ê³¨ê²© í˜¸ë‘ì´'},    MNUS:{emoji:'ğŸ¦š', label:'ê³¨ê²© ê³µì‘'},
  MWUS:{emoji:'ğŸ¬', label:'ê³¨ê²© ëŒê³ ë˜'},    BNUC:{emoji:'ğŸ¦‰', label:'ê³¨ê²© ì˜¬ë¹¼ë¯¸'},
};
const ALL_CODES = Object.keys(CODE_META);


/* 16íƒ€ì… ë™ë¬¼ ì´ëª¨ì§€ */
const EMOJIS_16 = [
  'ğŸ¨','ğŸº','ğŸ¦‹','ğŸ¹','ğŸ•Š','ğŸ»','ğŸ¦„','ğŸ¦…',
  'ğŸ¦Š','ğŸ¦Œ','ğŸ†','ğŸ¦ˆ','ğŸ…','ğŸ¦š','ğŸ¬','ğŸ¦‰'
];

(function makeEmojiCloud() {
  const host = document.querySelector('.emoji-cloud');
  if (!host) return;

  const N = 18; 
  const vw = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
  const isMobile = vw < 480;

  for (let i = 0; i < N; i++) {
    const span = document.createElement('span');
    span.className = 'emo';
    span.textContent = EMOJIS_16[i % EMOJIS_16.length];

    const size   = isMobile ? rand(18, 28)  : rand(22, 34);
    const x      = rand(6, 94);      // ê°€ë¡œ ìœ„ì¹˜ %
    const yStart = rand(102, 120);   // í™”ë©´ ì•„ë˜ì—ì„œ
    const dur    = rand(10, 16);     // ë¶€ìœ  ì‹œê°„
    const delay  = rand(-8, 6);      // ì‹œê°„ì°¨
    const drift  = rand(14, 28);     // ì¢Œìš° í”ë“¤ë¦¼
    const rot    = rand(6, 14) * (Math.random() < .5 ? -1 : 1);
    const travel = isMobile ? rand(48, 60) : rand(55, 70); // ìƒìŠ¹ ê±°ë¦¬ï¼ˆvhï¼‰
    const opacity= rand(55, 80) / 100;

    span.style.setProperty('--size', size);
    span.style.setProperty('--x', x);
    span.style.setProperty('--yStart', yStart);
    span.style.setProperty('--dur', dur + 's');
    span.style.setProperty('--delay', delay + 's');
    span.style.setProperty('--drift', drift + 'px');
    span.style.setProperty('--rot', rot + 'deg');
    span.style.setProperty('--heightTravel', travel + 'vh');
    span.style.setProperty('--opacity', opacity);

    host.appendChild(span);
  }

  function rand(min, max){ return Math.floor(Math.random()*(max-min+1))+min; }
})();
</script>
<script>
  (function(){
    const ribbon = document.getElementById('emojiRibbon');
    const track  = document.getElementById('ribbonTrack');
    if(!ribbon || !track) return;

    const durSec = Number(ribbon.dataset.speed || 28);
    track.style.setProperty('--dur', durSec + 's');

    const base = track.querySelector('.loop');
    if(!base) return;

    const needWidth = () => ribbon.clientWidth * 2.2;
    while (track.scrollWidth < needWidth()) {
      track.appendChild(base.cloneNode(true));
    }
    track.appendChild(base.cloneNode(true));

    const half = track.scrollWidth / 2;
    const gap  = Math.max(0, half - ribbon.clientWidth);
    const ratio = half ? (gap / half) : 0;
    const delaySec = -(ratio * durSec);
    track.style.setProperty('--delay', delaySec + 's');

    requestAnimationFrame(()=> track.classList.add('is-ready'));

    let t;
    window.addEventListener('resize', ()=>{
      clearTimeout(t);
      t = setTimeout(()=>{
        track.innerHTML = '';
        track.appendChild(base.cloneNode(true));
        (function rebuild(){
          while (track.scrollWidth < needWidth()) track.appendChild(base.cloneNode(true));
          track.appendChild(base.cloneNode(true));
          const half = track.scrollWidth / 2;
          const gap  = Math.max(0, half - ribbon.clientWidth);
          const ratio = half ? (gap / half) : 0;
          const delaySec = -(ratio * durSec);
          track.style.setProperty('--delay', delaySec + 's');
          track.classList.add('is-ready');
        })();
      }, 120);
    }, { passive:true });
  })();

/* ==== ë©”ì¸ ê·¸ë¦¬ê¸° ==== */
// ì¬ì‹œë„ í¬í•¨ fetch (ìµœëŒ€ 3íšŒ ì‹œë„)
async function fetchWithRetry(url, options = {}, retries = 3, delay = 1000) {
  for (let i = 0; i < retries; i++) {
    try {
      const response = await fetch(url, options);
      if (response.status >= 500 && i < retries - 1) {
        console.log(`[Retry] ${i + 1}/${retries - 1} after ${delay}ms (status: ${response.status})`);
        await new Promise(resolve => setTimeout(resolve, delay));
        delay *= 2;
        continue;
      }
      return response;
    } catch (error) {
      if (i < retries - 1) {
        console.log(`[Retry] ${i + 1}/${retries - 1} after ${delay}ms (error: ${error.message})`);
        await new Promise(resolve => setTimeout(resolve, delay));
        delay *= 2;
        continue;
      }
      throw error;
    }
  }
}

async function fetchStats(){
  const res = { total:0, byType:{}, byBase:{WAVE:0,NATURAL:0,STRAIGHT:0} };
  try{
    const r = await fetchWithRetry(`${API_URL}/stats`, { cache:'no-store' });
    if (!r.ok) return res;
    const data = await r.json();
    if (!data.ok) return res;
    res.total  = data.total  || 0;
    res.byType = data.byType || {};
    res.byBase = data.byBase || { WAVE:0, NATURAL:0, STRAIGHT:0 };
  }catch(e){
    console.warn('[index] fetch stats error:', e);
  }
  return res;
}

function renderDonut(base, count, total){
  const donut = document.querySelector(`.donut[data-key="${base}"]`);
  const numEl = document.querySelector(`.donut-num[data-num="${base}"]`);
  if (!donut || !numEl) return;

  const pct = total ? Math.round((count/total)*100) : 0;
  numEl.textContent = pct + '%';

  const C = 2 * Math.PI * 48; // r=48
  const dash = (pct/100) * C;
  const prog = donut.querySelector('[data-prog]');
  if (prog) prog.style.strokeDasharray = `${dash} ${C-dash}`;
}

function renderTypeGridTop(byType, total){
  const host = document.getElementById('typeGridTop');
  if (!host) return;

  const max = Math.max(...ALL_CODES.map(c => byType[c] || 0), 1);
  host.innerHTML = ALL_CODES.map(code=>{
    const n   = byType[code] || 0;
    const pct = total ? Math.round(n / total * 100) : 0;
    const w   = Math.max(3, Math.round((n / max) * 100));
    const {emoji, label} = CODE_META[code] || {emoji:'ğŸ§­', label:code};
    return `
      <div class="type-cell" data-code="${code}" title="${code}">
        <div class="type-ico">${emoji}</div>
        <div class="type-meta">
          <div class="type-name">${label} <span class="muted">(${code})</span></div>
          <div class="type-bar"><i style="width:${w}%"></i></div>
          <div class="small muted" style="margin-top:4px">${pct}% ãƒ» ${n}ê±´</div>
        </div>
      </div>`;
  }).join('');
}

async function renderIndex(){
  const stats = await fetchStats();
  // ë„ë„› ì°¨íŠ¸ï¼ˆ3 ë² ì´ìŠ¤ï¼‰
  renderDonut('WAVE',     stats.byBase.WAVE||0,     stats.total||0);
  renderDonut('NATURAL',  stats.byBase.NATURAL||0,  stats.total||0);
  renderDonut('STRAIGHT', stats.byBase.STRAIGHT||0, stats.total||0);

  // 16íƒ€ì… í‘œ
  renderTypeGridTop(stats.byType||{}, stats.total||0);
}

document.addEventListener('DOMContentLoaded', ()=>{
  renderIndex();
  setInterval(renderIndex, 60000); // 60ì´ˆ ê°±ì‹ 
});
</script>
<script>
window.addEventListener('DOMContentLoaded', function(){
  const openBtn  = document.getElementById('navOpen');
  const closeBtn = document.getElementById('navClose');
  const drawer   = document.getElementById('drawer');
  const scrim    = document.getElementById('scrim');

  if(!openBtn || !closeBtn || !drawer || !scrim){
    console.warn('[drawer] í•„ìš”í•œ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    return;
  }

  function open(){
    drawer.classList.add('open');
    drawer.setAttribute('aria-hidden','false');
    openBtn.setAttribute('aria-expanded','true');
    scrim.hidden = false;
    document.documentElement.style.overflow = 'hidden'; // ë°°ê²½ ê³ ì •
  }
  function close(){
    drawer.classList.remove('open');
    drawer.setAttribute('aria-hidden','true');
    openBtn.setAttribute('aria-expanded','false');
    scrim.hidden = true;
    document.documentElement.style.overflow = '';
  }

  openBtn.addEventListener('click', open,  { passive: true });
  closeBtn.addEventListener('click', close, { passive: true });
  scrim.addEventListener('click', close,    { passive: true });
  window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') close(); });
});
</script>
<script>
(function(){
  const ribbon = document.getElementById('emojiRibbon');
  const track  = document.getElementById('ribbonTrack');
  if(!ribbon || !track) return;

  // ì†ë„(ì´ˆ) ì»¤ìŠ¤í…€ ì‹œ data-speed="26" ë“±ì„ emojiRibbonì— ì¶”ê°€
  const durSec = Number(ribbon.dataset.speed || 28);
  track.style.setProperty('--dur', durSec + 's');

  // ê¸°ë³¸ ë£¨í”„ (1ë²ˆì§¸) ì·¨ë“
  const base = track.querySelector('.loop');
  if(!base) return;

  // í™”ë©´ í­ì— ë”°ë¼ íŠ¸ë™ í­ì´ "ì»¨í…Œì´ë„ˆ í­ì˜ 2.2ë°° ì´ìƒ"ì´ ë  ë•Œê¹Œì§€ ë³µì œ
  const needWidth = () => ribbon.clientWidth * 2.2;
  while (track.scrollWidth < needWidth()) {
    track.appendChild(base.cloneNode(true));
  }
  // ì—°ê²° ë¶€ìœ„ ì•ˆì „ ë§ˆì§„ì„ ìœ„í•´ í•˜ë‚˜ ë” ì¶”ê°€
  track.appendChild(base.cloneNode(true));

  // ìš°ì¸¡ ëì—ì„œ ìì—°ìŠ¤ëŸ½ê²Œ ì‹œì‘í•˜ê¸° ìœ„í•œ "ìŒìˆ˜ ë”œë ˆì´" ì‚°ì¶œ
  const half = track.scrollWidth / 2;
  const gap  = Math.max(0, half - ribbon.clientWidth);          
  const ratio = half ? (gap / half) : 0;                        
  const delaySec = -(ratio * durSec);                           
  track.style.setProperty('--delay', delaySec + 's');

  // ì¤€ë¹„ ì™„ë£Œ â†’ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
  requestAnimationFrame(()=> track.classList.add('is-ready'));

  // ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ì¬ê³„ì‚° (ëª¨ë°”ì¼ íšŒì „ ëŒ€ì‘)
  let t;
  window.addEventListener('resize', ()=>{
    clearTimeout(t);
    t = setTimeout(()=>{
      // ì¼ë‹¨ ì´ˆê¸°í™” í›„ ì¬êµ¬ì¶•
      track.innerHTML = '';
      track.appendChild(base.cloneNode(true));
      
      (function rebuild(){
        while (track.scrollWidth < needWidth()) track.appendChild(base.cloneNode(true));
        track.appendChild(base.cloneNode(true));
        const half = track.scrollWidth / 2;
        const gap  = Math.max(0, half - ribbon.clientWidth);
        const ratio = half ? (gap / half) : 0;
        const delaySec = -(ratio * durSec);
        track.style.setProperty('--delay', delaySec + 's');
        track.classList.add('is-ready');
      })();
    }, 120);
  }, { passive: true });
})();
</script>
</body>
</html>