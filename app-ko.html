<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="color-scheme" content="light dark">
<title>16BodyPersonalities</title>
<link rel="stylesheet" href="./styles.css?v=1">
<style>
/* è¿½åŠ ï¼šãƒ¢ã‚¶ã‚¤ã‚¯åˆ¶å¾¡ç”¨ã®CSS */
.blur-container {
  position: relative;
  overflow: hidden;
  margin-top: 20px;
  border-radius: 12px;
}
.blur-content {
  filter: blur(8px); /* ã¼ã‹ã—å¼·åº¦ */
  user-select: none;
  opacity: 0.6;
  pointer-events: none;
}
.lock-overlay {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.3);
  z-index: 10;
  text-align: center;
  padding: 20px;
}
.lock-icon {
  font-size: 40px;
  margin-bottom: 10px;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
}
.lock-msg {
  font-weight: bold;
  color: #d8559b;
  background: rgba(255,255,255,0.95);
  padding: 8px 16px;
  border-radius: 20px;
  margin-bottom: 16px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  font-size: 14px;
}
/* ãƒ­ãƒƒã‚¯è§£é™¤ãƒœã‚¿ãƒ³ï¼ˆå°ã•ã‚ï¼‰ */
.unlock-btn {
  background: linear-gradient(90deg, #ff86c8, #ffa6da);
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 99px;
  font-weight: bold;
  font-size: 14px;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(255,134,200,0.4);
  transition: transform 0.2s;
}
.unlock-btn:active { transform: scale(0.95); }
</style>
</head>
<body data-theme="WAVE">
  <header class="site-header">
  <a class="brand" href="index-ko.html">16Body<span>Personalities</span></a>

  <div class="lang-switch">
    <a href="index.html" class="lang-btn">ğŸ‡¯ğŸ‡µ</a>
    <a href="index-ko.html" class="lang-btn active">ğŸ‡°ğŸ‡·</a>
  </div>

  <nav class="nav-links">
    <a href="index-ko.html" class="chip-btn">í™ˆ</a>
    <a href="gallery-ko.html" class="chip-btn">íƒ€ì… ê°¤ëŸ¬ë¦¬</a>
    <a href="contact-ko.html" class="chip-btn">ë¬¸ì˜í•˜ê¸°</a>
  </nav>

  <button class="hamburger" id="navOpen" aria-label="ë©”ë‰´" aria-controls="drawer" aria-expanded="false">
    <svg width="26" height="26" viewBox="0 0 24 24" aria-hidden="true">
      <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>
  </button>
</header>

<aside class="drawer cute-luxe" id="drawer" aria-hidden="true">
  <div class="drawer-head">
    <a class="drawer-brand" href="index-ko.html" aria-label="í™ˆìœ¼ë¡œ">
      16Body<span class="brand-accent">Personalities</span>
    </a>
    <button class="drawer-close" id="navClose" aria-label="ë‹«ê¸°">
      âœ•
    </button>
  </div>

  <nav class="drawer-links">
    <a href="index-ko.html" class="drawer-item">í™ˆ</a>
    <a href="app-ko.html" class="drawer-item">ì§„ë‹¨ ì‹œì‘í•˜ê¸°</a>
    <a href="gallery-ko.html" class="drawer-item">íƒ€ì… ê°¤ëŸ¬ë¦¬</a>
    <a href="privacy-ko.html" class="drawer-item">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
    <a href="terms-ko.html" class="drawer-item">ì´ìš©ì•½ê´€</a>
    <a href="contact-ko.html" class="drawer-item">ë¬¸ì˜í•˜ê¸°</a>
  </nav>
</aside>

<div class="scrim" id="scrim" hidden></div>
<div class="wrap">
  <div id="app" class="card"></div>
</div>

<script>
  document.body.dataset.theme = 'WAVE';
  // ============ AWS API ì„¤ì • ============
const API_URL = "https://uk952hkt2e.execute-api.ap-northeast-1.amazonaws.com/prod"

// ì¬ì‹œë„ í¬í•¨ fetch
async function fetchWithRetry(url, options = {}, retries = 3, delay = 1000) {
  for (let i = 0; i < retries; i++) {
    try {
      const response = await fetch(url, options);
      if (response.status >= 500 && i < retries - 1) {
        await new Promise(resolve => setTimeout(resolve, delay));
        delay *= 2; 
        continue;
      }
      return response;
    } catch (error) {
      if (i < retries - 1) {
        await new Promise(resolve => setTimeout(resolve, delay));
        delay *= 2;
        continue;
      }
      throw error;
    }
  }
}

function sendToSheets(payload){
  return fetchWithRetry(`${API_URL}/diagnoses`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  })
  .then(r => r.json().then(data => {
    return { status: r.status, body: data };
  }))
  .catch(e => {
    console.error('[API] error:', e);
    throw e;
  });
}

// ë™ì˜ ìƒíƒœ ê´€ë¦¬
const CONSENT_KEY = 'km_consent'; 
function getConsent(){ return localStorage.getItem(CONSENT_KEY) ?? 'yes'; }
function setConsent(v){ localStorage.setItem(CONSENT_KEY, v ? 'yes' : 'no'); }

function makeInitialState(){
  const make = n => Array(n).fill(3); 
  return {
    step: 0,
    _sentOnce: false,
    answers: {
      frame:   make(12),
      surface: make(12),
      balance: make(12),
      line:    make(12)
    }
  };
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ 4ì¶• ì •ì˜ (í•œêµ­ì–´) â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const AXES = [
  { key:'frame',   codePos:'B', codeNeg:'M', label:'êµ¬ì¡°ì¶• (Frame)',
    posLabel:'ê³¨ê²© ì£¼ë„ (B)', negLabel:'ì§ˆê° ì£¼ë„ (M)', threshold:3.5 },

  { key:'surface', codePos:'W', codeNeg:'N', label:'ë©´ì ì¶• (Surface)',
    posLabel:'í”„ë ˆì„ ë„“ìŒ (W)', negLabel:'í”„ë ˆì„ ì¢ìŒ (N)', threshold:3.5 },

  { key:'balance', codePos:'U', codeNeg:'L', label:'ì¤‘ì‹¬ì¶• (Balance)',
    posLabel:'ìƒì²´ ì¤‘ì‹¬ (U)', negLabel:'í•˜ì²´ ì¤‘ì‹¬ (L)', threshold:3.5 },

  { key:'line',    codePos:'S', codeNeg:'C', label:'ë¼ì¸ì¶• (Line)',
    posLabel:'ì§ì„  (S)', negLabel:'ê³¡ì„  (C)', threshold:3.5 },
];

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì§ˆë¬¸ (í•œêµ­ì–´ ë²ˆì—­) â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const QUESTIONS = {
  frame:[
    {t:'ì˜·ì„ ë²—ì—ˆì„ ë•Œ, ê°ˆë¹„ë¼ˆ(ëŠ‘ê³¨)ê°€ í¬ë¯¸í•˜ê²Œ ë³´ì¸ë‹¤',pos:true},
    {t:'ê°€ìš´ëƒì†ê°€ë½ì˜ ê¸¸ì´ê°€ ì†ë°”ë‹¥ ê¸¸ì´ë³´ë‹¤ ê¸¸ë‹¤',pos:true},
    {t:'ë¬´ë¦ ë¼ˆê°€ ë„ë“œë¼ì ¸ ë³´ì¸ë‹¤',pos:true},
    {t:'ì†ì´ ì–¼êµ´(í„±ì—ì„œ ëˆˆì¹ ìœ„)ë³´ë‹¤ í¬ë‹¤',pos:true},
    {t:'ì›€ì§ì¼ ë•Œ ê·¼ìœ¡ì˜ ì›€ì§ì„ì´ ì˜ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤ (ë¼ˆê°€ ë” ì˜ ë³´ì„)',pos:true},
    {t:'ëª©ì –ì´ ë³„ë¡œ ëˆˆì— ë„ì§€ ì•ŠëŠ”ë‹¤',pos:false},
    {t:'ë°°ë‚˜ íŒ” ì£¼ë³€ì— ì§€ë°©ì´ ì˜ ë¶™ì§€ ì•ŠëŠ” í¸ì´ë‹¤',pos:true},
    {t:'ì†ëª©ì„ ì¡ì•˜ì„ ë•Œ ê²€ì§€ì™€ ì—„ì§€ê°€ ì˜ ë‹¿ì§€ ì•ŠëŠ”ë‹¤',pos:false},
    {t:'í‹°ì…”ì¸ ë¥¼ ì…ìœ¼ë©´ ì–´ê¹¨ë¼ˆì˜ í˜•íƒœê°€ ì˜ ë“œëŸ¬ë‚œë‹¤',pos:true},
    {t:'í—ˆë²…ì§€ì— ê·¼ìœ¡ì´ ì˜ ë¶™ëŠ” í¸ì´ë‹¤',pos:false},
    {t:'ë”±ë”±í•œ ì˜ìì— ì•‰ìœ¼ë©´ ì—‰ë©ì´ ë¼ˆê°€ ë‹¿ì•„ ì•„í”„ë‹¤',pos:true},
    {t:'ì‡„ê³¨ì´ ì†ê°€ë½ 1.5ê°œ í­ë³´ë‹¤ ê°€ëŠ˜ê³ , ì‡„ê³¨ ì‹œì‘ì ì—ì„œ ì–´ê¹¨ê¹Œì§€ì˜ ê¸¸ì´ê°€ ì†ë³´ë‹¤ ì§§ë‹¤',pos:false}
  ],
  surface:[
    {t:'ì£¼ë³€ì—ì„œ ì‹¤ì œ í‚¤ë³´ë‹¤ ì»¤ ë³´ì¸ë‹¤ëŠ” ë§ì„ ë“£ëŠ”ë‹¤',pos:true},
    {t:'ì–´ê¹¨ë„ˆë¹„ê°€ ì–¼êµ´ ê°€ë¡œí­ 3ê°œë¶„ë³´ë‹¤ ë„“ë‹¤',pos:true},
    {t:'ë‹¤ë¥¸ ì‚¬ëŒê³¼ ë‚˜ë€íˆ ì„œë©´, ë‚´ "ì–´ê¹¨~íŒ”" ì£¼ë³€ì´ ë„“ì–´ ë³´ì¼ ë•Œê°€ ë§ë‹¤', pos:true },
    {t:'ìƒë°˜ì‹ ì˜ "ê°€ë¡œí­"ì´ í‚¤ì— ë¹„í•´ ì™œì†Œí•˜ê²Œ ëŠê»´ì§ˆ ë•Œê°€ ìˆë‹¤', pos:false },
    {t:'íŒ” ê¸¸ì´ê°€ ë¬´ë¦ê³¼ ì—‰ë©ì´ ì¤‘ê°„ ì •ë„ê¹Œì§€ ë‚´ë ¤ì˜¨ë‹¤',pos:true},
    {t:'ì˜¤ë²„ì‚¬ì´ì¦ˆ ì˜·ì„ ì…ìœ¼ë©´ ì–´ê¹¨ê°€ ë§¤ìš° ë„“ì–´ ë³´ì¸ë‹¤', pos:true },
    {t:'ëª¸ì— êµ´ê³¡ì´ ìˆê³ , í—ˆë¦¬ ì˜ë¡í•¨ì´ ëšœë ·í•˜ë‹¤',pos:false},
    {t:'ì‚¬ì§„ì—ì„œ íƒ€ì¸ê³¼ ì„œ ìˆìœ¼ë©´ í‚¤ì— ë¹„í•´ ëª¸ì§‘ì´ ì‘ì•„ ë³´ì¸ë‹¤',pos:false},
    {t:'ëª© ë¶€ë¶„ì´ ë„‰ë„‰í•˜ê²Œ íŒŒì¸ ì˜·ì´ ì˜ ì–´ìš¸ë¦°ë‹¤',pos:true},
    {t:'ìœ„ì•„ë˜ë¡œ ê¸¸ê¸°ë³´ë‹¤ ì˜†ìœ¼ë¡œ í¼ì§€ëŠ” ë“¯í•œ ì²´í˜•ì´ë‹¤',pos:true},
    {t:'ë¹… ì‹¤ë£¨ì—£ ì˜·ì„ ì…ìœ¼ë©´ ë¹ˆí‹°ê°€ ë‚˜ ë³´ì¸ë‹¤',pos:false},
    {t:'ì •ì‚¬ì´ì¦ˆ ì˜·ì„ ì…ìœ¼ë©´ ì–´ê¹¨í­ì´ ë‹µë‹µí•˜ê²Œ ëŠê»´ì§„ë‹¤',pos:true}
  ],
  balance:[
    {t:'ê±°ìš¸ì„ ë³´ë©´ ìƒë°˜ì‹ (ê°€ìŠ´/ì–´ê¹¨)ì´ ëˆˆì— ëˆë‹¤',pos:true},
    {t:'ì˜†ì—ì„œ ë´¤ì„ ë•Œ ëª¸í†µì˜ ë‘ê»˜ê°ì´ ëŠê»´ì§„ë‹¤',pos:true},
    {t:'ë¬´ë¦ ìœ„ì¹˜ê°€ ë†’ë‹¤ (ì¢…ì•„ë¦¬ê°€ í—ˆë²…ì§€ë³´ë‹¤ ê¸¸ë‹¤)',pos:true},
    {t:'í—ˆë¦¬ ìœ„ì¹˜ê°€ ë‚®ì•„ ë³´ì¸ë‹¤',pos:false},
    {t:'ì•‰ì•„ ìˆìœ¼ë©´ í‚¤ê°€ ì‘ì•„ ë³´ì¸ë‹¤ (ìƒì²´ê°€ ì§§ìŒ)',pos:true},
    {t:'ëª© ê¸¸ì´ê°€ ì†ì˜ ê°€ë¡œí­(ì—„ì§€~ìƒˆë¼)ë³´ë‹¤ ì§§ë‹¤',pos:true},
    {t:'ë°”ë””ë¼ì¸ì´ ë“œëŸ¬ë‚˜ëŠ” ì˜·ì´ ì˜ ì–´ìš¸ë¦°ë‹¤',pos:true},
    {t:'ìƒì˜ì— ë³¼ë¥¨ì„ ì£¼ë©´ ë¶€í•´ ë³´ì¸ë‹¤',pos:false},
    {t:'ì™€ì´ë“œ íŒ¬ì¸ ë³´ë‹¤ ìŠ¤í‚¤ë‹ˆ íŒ¬ì¸ ê°€ ë‹¤ë¦¬ê°€ ê¸¸ì–´ ë³´ì¸ë‹¤',pos:true},
    {t:'ê¸´ ëª©ê±¸ì´ë³´ë‹¤ ì§§ì€ ëª©ê±¸ì´ê°€ ë” ì˜ ì–´ìš¸ë¦°ë‹¤',pos:true},
    {t:'íŒ” ê¸¸ì´ê°€ ì§§ì€ í¸ì´ë‹¤',pos:true},
    {t:'ê¸°ì¥ì´ ì§§ì€ í¬ë¡­ ìƒì˜ê°€ ì˜ ì–´ìš¸ë¦°ë‹¤',pos:true}
  ],
  line:[
    {t:'ì†ë°œì´ë‚˜ ëª¸ì˜ ìœ¤ê³½ì´ ê³§ê²Œ ë»—ì–´ ë³´ì¸ë‹¤',pos:true},
    {t:'ì–´ê¹¨ë‚˜ í—ˆë¦¬ì— ë‘¥ê·¼ ëŠë‚Œì´ ì—†ë‹¤',pos:true},
    {t:'ì—‰ë©ì´ê°€ ë‘ê»ê³  ë³¼ë¥¨ê°ì´ ìˆë‹¤',pos:false},
    {t:'ì–¼êµ´ì´ ê¸´ í¸ì´ë¼ê¸°ë³´ë‹¤ ë‘¥ê·¼ í¸ì´ë‹¤',pos:false},
    {t:'ë‘ê»ê³  í­ì‹ í•œ ì†Œì¬ë³´ë‹¤ ì…”ì¸  ë“± ì–‡ê³  íƒ„íƒ„í•œ ì†Œì¬ê°€ ë‚«ë‹¤',pos:true},
    {t:'ì •ì¥(ìˆ˜íŠ¸)ì„ ì…ìœ¼ë©´ ì–´ë”˜ê°€ ì–´ìƒ‰í•´ ë³´ì¸ë‹¤',pos:false},
    {t:'ì •ë©´ì—ì„œ ë´¤ì„ ë•Œ ê°€ìŠ´ì˜ ë‘¥ê·¼ ë¼ì¸ì´ ëˆˆì— ëˆë‹¤',pos:false},
    {t:'íŒ¨ë”© ë“±ì„ ì…ìœ¼ë©´ ëš±ëš±í•´ ë³´ì¸ë‹¤',pos:false},
    {t:'ì˜†ì–¼êµ´ì´ë‚˜ ì˜†ëª¨ìŠµì´ ì§ì„ ì ì´ë‹¤',pos:true},
    {t:'ì–¼êµ´ì˜ ë¼ˆ(ê´‘ëŒ€/í„±)ê°€ ëˆˆì— ë„ì§€ ì•ŠëŠ”ë‹¤',pos:false},
    {t:'ë‹¨ì •í•œ ìƒë¨¸ë¦¬(ìŠ¤íŠ¸ë ˆì´íŠ¸)ëŠ” ì–¼êµ´ì´ ì»¤ ë³´ì¸ë‹¤',pos:false},
    {t:'í„±ì„ (í˜ì´ìŠ¤ë¼ì¸)ì´ ëšœë ·í•˜ë‹¤',pos:true}
  ]
};

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ 16íƒ€ì… ì •ì˜ (í•œêµ­ì–´) â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const TYPE_META = {
  /* ============== WAVE ============== */
  BNLS:{ 
    name:'ê³¨ê²© ì½”ì•Œë¼(Romantic Wave)', base:'WAVE', emoji:'ğŸ¨', animal:'ì½”ì•Œë¼',
    image:'images/BNLS.jpg',
    concept:'ë‹¬ì½¤í•˜ê³  ë¶€ë“œëŸ¬ìš´, í¬ìš©ë ¥ ìˆëŠ” ë¡œë§¨í‹±í•¨.',
    body:'B=ì•½ê°„ ê³¨ê²© / W=ë„“ìŒ / L=í•˜ì²´ì¤‘ì‹¬ / S=ì§ì„ ê°•ì„¸. ìƒì²´ëŠ” í™”ë ¤í•˜ê³  í—ˆë¦¬~í™ì— ë‘¥ê·¼ ëŠë‚Œ. ë¼ˆì˜ ì£¼ì¥ì€ ì•½í•˜ê³  ë¶€ë“œëŸ¬ìš´ ìŒì˜ê³¼ ì§ì„ ì ì¸ ì„ ì´ íŠ¹ì§•.',
    brandHints:['SNIDEL','CELFORD','TOCCA','Lily Brown','FRAY I.D','IÃ‰NA','Noela'],
    styleNotes:[
      'ì–‡ê³  ì¤‘ê°„ ë‘ê»˜ì˜ íë¥´ëŠ” ì†Œì¬ (ì‰¬í°/ì‚¬í‹´)',
      'ì¹´ë¼ëŠ” ë¼ìš´ë“œ/í•˜íŠ¸/ìŠ¤ì¹´í”„ íƒ€ì´ë¡œ ë¶€ë“œëŸ½ê²Œ',
      'Aë¼ì¸ì´ë‚˜ ë¨¸ë©”ì´ë“œë¡œ í•˜ì²´ ì»¤ë²„ & ê°€ë²¼ì›€ ì¶”ê°€',
      'ìƒ‰ìƒì€ ì¤‘~ì €ì±„ë„ì˜ ì›í†¤, í•‘í¬/ë¼ë²¤ë” ê³„ì—´ ì¶”ì²œ'
    ],
    celebrities:{ jp:['ìš°ë©”ë‹¤ ë¯¸ìœ ','ì´ì™€ëª¨í†  íˆì¹´ë£¨','ì•„ë²  ë£Œí—¤ì´'], kr: ['ë¡œì œ(BLACKPINK)','ì§€ë¯¼(BTS)','ë²”ê·œ(TXT)'], global:['Lily Collins'] }
  },

  MNLC:{ 
    name:'ê³¨ê²© ìš¸í”„(Urban Elegance)', base:'WAVE', emoji:'ğŸº', animal:'ëŠ‘ëŒ€',
    image:'images/MNLC.jpg',
    concept:'ì¡°ìš©í•˜ê³  ì‹¬ì§€ êµ³ì€ ë¶€ë“œëŸ¬ì›€, ì§€ì ì¸ ì„¸ë ¨ë¯¸.',
    body:'M=ì§ˆê°ìœ„ì£¼ / N=ì»´íŒ©íŠ¸ / L=í•˜ì²´ì¤‘ì‹¬ / C=ê³¡ì„ ìœ„ì£¼. ë¶€ë“œëŸ¬ì›€ì´ í¬ì¸íŠ¸. ë‹¤ë¦¬ì— ë³¼ë¥¨ì´ ìƒê¸°ê¸° ì‰¬ìš°ë¯€ë¡œ ìƒì²´ì— í¬ì¸íŠ¸ë¥¼.',
    brandHints:['IÃ‰NA','Mila Owen','Plage','N.O.R.C','URBAN RESEARCH','TOMORROWLAND'],
    styleNotes:[
      'Ië¼ì¸ì„ ì˜ì‹í•œ ì„¸ë¡œ ê¸´ ì„¤ê³„',
      'ë„ˆë¬´ ë¹³ë¹³í•˜ì§€ ì•Šì€ íŠ¸ìœŒ/í°ì¹˜ ì†Œì¬',
      'í¬ë¡­ ê¸°ì¥ ìƒì˜ + í•˜ì´ì›¨ì´ìŠ¤íŠ¸ë¡œ ì‹œì„  UP',
      'ê·¸ë ˆì´ì§€/í† í”„/ë”ìŠ¤í‹° í•‘í¬ ë“± ë‰˜ì•™ìŠ¤ ì»¬ëŸ¬'
    ],
    celebrities:{ jp:['ë‚˜ê°€ì„¸ ë Œ','íƒ€ì¹´í•˜ì‹œ ì¿„í—¤ì´','ë‹ˆì‹œí‚¤ë„ ë£Œ'], kr: ['ì¥ì›ì˜(IVE)','ì›ë¹ˆ(RIIZE)','ì‹ ìœ (TWS)'], global:['Natalie Portman'] }
  },

  MWLC:{ 
    name:'ê³¨ê²© ë²„í„°í”Œë¼ì´(Light Wave)', base:'WAVE', emoji:'ğŸ¦‹', animal:'ë‚˜ë¹„',
    image:'images/MWLC.jpg',
    concept:'ë°”ëŒì— í©ë‚ ë¦¬ëŠ” íˆ¬ëª…ê°, ê³§ê³  ê°€ë²¼ìš´ ê· í˜•.',
    body:'M=ì§ˆê° / W=ë„“ìŒ / L=í•˜ì²´ì¤‘ì‹¬ / C=ê³¡ì„ . í—ˆë¦¬~í—ˆë²…ì§€ì— ë³¼ë¥¨. ê°€ë²¼ìš´ ì†Œì¬ì™€ ì„¸ë¡œ ë¼ì¸ìœ¼ë¡œ "ê²½ì¾Œí•œ ì§ì„ "ì„ ë§Œë“¤ë©´ ë² ìŠ¤íŠ¸.',
    brandHints:['N.O.R.C','IÃ‰NA','UNIQLO','BEAUTY&YOUTH','TOMORROWLAND','LE PHIL'],
    styleNotes:[
      'í•˜ì´ì›¨ì´ìŠ¤íŠ¸ë¡œ ë‹¤ë¦¬ ê¸¸ì´ ë³´ì •',
      'ìƒì˜ëŠ” ì»´íŒ©íŠ¸, í•˜ì˜ëŠ” íˆ­ ë–¨ì–´ì§€ëŠ” Ië¼ì¸',
      'ì§ì„ ì ì¸ ì…”ì¸ /ë…¸ì¹´ë¼ ì¬í‚·ì„ ì–‡ê²Œ',
      'ì•¡ì„¸ì„œë¦¬ëŠ” ì–‡ì€ ì„ ìœ¼ë¡œ ê°€ë³ê²Œ í†µì¼'
    ],
    celebrities:{ jp:['Vaundy','í›„ì¹´ìì™€ íƒ€ì¸ ì•¼','ê¸°ë¬´ë¼ íƒ€ì¿ ì•¼'], kr:['ì¹´ë¦¬ë‚˜(aespa)','ì†Œí¬(RIIZE)','íƒœí˜„(TXT)'], global:['Selena Gomez'] }
  },

  MWLS:{ 
    name:'ê³¨ê²© í–„ìŠ¤í„°(Natural Girly)', base:'WAVE', emoji:'ğŸ¹', animal:'í–„ìŠ¤í„°',
    image:'images/MWLS.jpg',
    concept:'ë‘¥ê¸€ê³  ë”°ëœ»í•¨, í­ì‹ í•œ ì‚¬ë‘ìŠ¤ëŸ¬ì›€.',
    body:'M=ì§ˆê° / W=ë„“ìŒ / L=í•˜ì²´ì¤‘ì‹¬ / S=ì§ì„ . ì „ì²´ì ìœ¼ë¡œ í­ì‹ í•œ ë‘ê»˜ê°. ì‚¬ë‘ìŠ¤ëŸ¬ìš´ ë””í…Œì¼ì€ ì‘ê²Œ & ìœ„ìª½ì— ì§‘ì¤‘.',
    brandHints:['SNIDEL','earth music&ecology','Kastane','LOWRYS FARM','tocco closet'],
    styleNotes:[
      'Aë¼ì¸/í”Œë ˆì–´/í‹°ì–´ë“œë¡œ "ì•„ë˜ë¡œ í¼ì§" í™œìš©',
      'ìƒì˜ëŠ” ì§§ê²Œ, ì†Œë§¤ì— ì•½ê°„ ë³¼ë¥¨ìœ¼ë¡œ ì‹œì„  UP',
      'ë¶€ë“œëŸ¬ìš´ ë‹ˆíŠ¸/ì»·ì†Œì–´ ì¤‘ì‹¬',
      'ì‘ì€ ê°€ë°© & ì„¬ì„¸í•œ ì•¡ì„¸ì„œë¦¬ë¡œ ë¬´ê²Œê° ëœê¸°'
    ],
    celebrities:{ jp: ['ë§ˆë‚˜ë²  ë‚˜ê¸°ì‚¬','í›„ì§€í•˜ë¼ ì‚¬í† ì‹œ'], kr: ['ì¯”ìœ„(TWICE)','ì‚¬ì¿ ë¼(LE SSERAFIM)','ì¤€(SEVENTEEN)'], global:['Ariana Grande'] }
  },

  MNLS:{ 
    name:'ê³¨ê²© ë¹„ë‘˜ê¸°(Classic Feminine)', base:'WAVE', emoji:'ğŸ•Š', animal:'ë¹„ë‘˜ê¸°',
    image:'images/MNLS.jpg',
    concept:'ë¶€ë“œëŸ½ê³  ìš°ì•„í•œ, ì€ì€í•˜ê²Œ í’ê¸°ëŠ” ì—˜ë ˆê°•ìŠ¤.',
    body:'M=ì§ˆê° / N=ì»´íŒ©íŠ¸ / L=í•˜ì²´ì¤‘ì‹¬ / S=ì§ì„ . ìƒë°˜ì‹ ì€ í™”ë ¤í•˜ê³  ê°€ìŠ´~í—ˆë¦¬ëŠ” ì™„ë§Œ, í•˜ì²´ì— ì•ˆì •ê°.',
    brandHints:['TOCCA','EPOCA','FOXEY','ANAYI','Apuweiser-riche'],
    styleNotes:[
      'í•˜íŠ¸/ë¼ìš´ë“œ/ì–•ì€ Vë„¥ì˜ ì—¬ì„±ìŠ¤ëŸ¬ìš´ ì¹´ë¼',
      'ë¯¸ë””~ë¡± ê¸°ì¥ì˜ í”Œë ˆì–´/ë¨¸ë©”ì´ë“œ ìŠ¤ì»¤íŠ¸',
      'ì‚¬í‹´ì´ë‚˜ ì¡°ì ¯ì˜ ê´‘íƒìœ¼ë¡œ ìš°ì•„í•˜ê²Œ',
      'ì§„ì£¼/ì‘ì€ ë³´ì„ìœ¼ë¡œ ì²­ê²°ê°'
    ],
    celebrities:{ jp: ['ì™€íƒ€ë‚˜ë²  ì‡¼íƒ€','í‚¤ì‹œ ìœ íƒ€'], kr: ['ë‚˜ì—°(TWICE)','ì±„ë ¹(ITZY)','í•„ë¦­ìŠ¤(Stray Kids)'], global:['Lily Collins'] }
  },

  BNLC:{ 
    name:'ê³¨ê²© í…Œë””(Earth Wave)', base:'WAVE', emoji:'ğŸ»', animal:'ê³°',
    image:'images/BNLC.jpg',
    concept:'ë”°ëœ»í•˜ê²Œ ê°ì‹¸ëŠ” ì•ˆì •ê°, ì¹˜ìœ ì˜ ì¤‘ì‹¬.',
    body:'B=ê³¨ê²©ê° / N=ì»´íŒ©íŠ¸ / L=í•˜ì²´ì¤‘ì‹¬ / C=ê³¡ì„ . ìƒë°˜ì‹ ì€ ì–‡ì§€ë§Œ í•˜ë°˜ì‹ ì´ í†µí†µí•´ ê³¡ì„ ë¯¸. ë¶€ë“œëŸ¬ìš´ ì†Œì¬ê°€ ì˜ ì–´ìš¸ë¦¼.',
    brandHints:['URBAN RESEARCH ROSSO','Plage','DOORS','JOURNAL STANDARD relume','IÃ‰NA'],
    styleNotes:[
      'ë¡± ê°€ë””ê±´/ê°€ë²¼ìš´ ì•„ìš°í„°ë¡œ "ê°ì‹¸ëŠ”" ëŠë‚Œ',
      'ë–¨ì–´ì§€ëŠ” ëŠë‚Œì´ ìˆëŠ” ì¤‘ê°„ ë‘ê»˜ ì†Œì¬',
      'ì–´ìŠ¤ ì»¬ëŸ¬ì˜ ì¤‘ê°„ ë°ê¸° (ë² ì´ì§€/ì¹´í‚¤/ëª¨ì¹´)',
      'êµ½ì´ ë„ˆë¬´ ë†’ì§€ ì•Šì€ ì‹ ë°œë¡œ ì•ˆì •ê°'
    ],
    celebrities:{ jp: ['ë¬´ì¹´ì´ ì½”ì§€','ì‚¬í†  ì‡¼ë¦¬','ì•¼ë§ˆë‹¤ ë£ŒìŠ¤ì¼€'], kr: ['ì‚¬ë‚˜(TWICE)','ê°€ì„(IVE)','í˜¸ì‹œ(SEVENTEEN)'], global:['Kristen Stewart'] }
  },

  /* ============== NATURAL ============== */
  BWUC:{ 
    name:'ê³¨ê²© ìœ ë‹ˆì½˜(Urban Natural)', base:'NATURAL', emoji:'ğŸ¦„', animal:'ìœ ë‹ˆì½˜',
    image:'images/BWUC.jpg',
    concept:'ë„“ì€ í”„ë ˆì„Ã—ê³¡ì„ Ã—ì—¬ë°±, í™˜ìƒê³¼ êµ¬ì¡°ì˜ ì¡°í™”.',
    body:'B=ê³¨ê²©ê° / W=ë„“ìŒ / U=ìƒì²´ì¤‘ì‹¬ / C=ê³¡ì„ . íŒ”ë‹¤ë¦¬ê°€ ê¸¸ê³  í”„ë ˆì„ ì¡´ì¬ê°ì´ ê°•í•¨. ì—¬ë°±ì„ ë‚¨ê¸°ëŠ” ë¯¸ë‹ˆë©€ ë£©ì´ ë² ìŠ¤íŠ¸. ëª¨ë¸ ì²´í˜•.',
    brandHints:['JOURNAL STANDARD','UNITED ARROWS','BEAUTY&YOUTH','AURALEE','YLEVE','TODAYFUL'],
    styleNotes:[
      'ê³¡ì„ Ã—ì—¬ìœ  ìˆëŠ” ë°•ìŠ¤í•/ì»¤ë¹„ í•',
      'ê°€ë²¼ìš´ ì…‹ì—…ìœ¼ë¡œ êµ¬ì¡°ê° ì—°ì¶œ',
      'ë„¥ë¼ì¸ì€ í¬ë£¨/ë³´íŠ¸/ìŠ¤íƒ ë“œ',
      'ìƒ‰ìƒì€ ë¬´ì±„ìƒ‰ + ì†ŒëŸ‰ì˜ ì†Œí”„íŠ¸ ì»¬ëŸ¬'
    ],
    celebrities:{ jp: ['í† ë¯¸ë‚˜ê°€ ì•„ì´','ë‚˜ì¹´ë§ˆë£¨ ìœ ì´ì¹˜'], kr: ['ì¹´ì¦ˆí•˜(LE SSERAFIM)','ì„±ì°¬(RIIZE)','ìš´í•™(BOYNEXTDOOR)'], global:['Gigi Hadid'] }
  },

  BWUS:{ 
    name:'ê³¨ê²© ë…ìˆ˜ë¦¬(Fairy Natural)', base:'NATURAL', emoji:'ğŸ¦…', animal:'ë…ìˆ˜ë¦¬',
    image:'images/BWUS.jpg',
    concept:'ê°€ë³ê³  íˆ¬ì² í•œ ì§€ì„±, ë¶€ê°í•˜ëŠ” ë¯¸í•™.',
    body:'B=ê³¨ê²©ê° / W=ë„“ìŒ / U=ìƒì²´ì¤‘ì‹¬ / S=ì§ì„ . ë¼ˆëŒ€ê°€ ê°•í•˜ê³  ì§ì„ ì . ìœ„ìª½ì— ê°€ë²¼ì›€ì„ ëª¨ìœ¼ë©´ ê³µê¸°ê°ì´ ì‚´ì•„ë‚¨.',
    brandHints:['ENFÃ–LD','Deuxieme Classe','TOMORROWLAND','athoos','COS'],
    styleNotes:[
      'ìƒë°˜ì‹  ë¹…ì‚¬ì´ì¦ˆ Ã— í•˜ì˜ ì§ì„  ë ˆì´ì–´ë“œ',
      'ì—°í•œ ìƒ‰ Ã— ë¬´ê¸°ì§ˆ ì•¡ì„¸ì„œë¦¬ (ì‹¤ë²„/ìŠ¤í‹¸)',
      'ê¹”ë”í•œ ìŠ¤ë‹ˆì»¤ì¦ˆ/ë¡œí¼',
      'ì‹œìŠ¤ë£¨/ì‹œì–´ ì†Œì¬ë¡œ ê°€ë²¼ì›€ ì¶”ê°€'
    ],
    celebrities:{ jp: ['ë¼ìš¸'], kr: ['ìœˆí„°(aespa)'], global:['Zendaya'] }
  },

  BWLC:{ 
    name:'ê³¨ê²© ì—¬ìš°(Classic Natural)', base:'NATURAL', emoji:'ğŸ¦Š', animal:'ì—¬ìš°',
    image:'images/BWLC.jpg',
    concept:'ë‹¨ì •í•˜ê³  ê¸°ë¯¼í•¨, ìì—°ìŠ¤ëŸ¬ìš´ í’ˆê²©.',
    body:'B=ê³¨ê²©ê° / W=ë„“ìŒ / L=í•˜ì²´ì¤‘ì‹¬ / C=ê³¡ì„ . ì–´ê¹¨~ë“±ì˜ í”„ë ˆì„ì´ ê¹”ë”. ì •ëˆëœ ê³¡ì„ ìœ¼ë¡œ "ì •ì ì¸ í’ˆê²©". ëª¨ë¸ ì²´í˜•.',
    brandHints:['IÃ‰NA','Plage','TOMORROWLAND','BEAMS','URBAN RESEARCH'],
    styleNotes:[
      'ì…”ì¸ /í…Œì¼ëŸ¬ë“œëŠ” ì–‡ì€ ì†Œì¬ë¡œ ë‹¨ì •í•˜ê²Œ',
      'ë¦°ë„¨/ì½”íŠ¼ìœ¼ë¡œ ì²­ëŸ‰ê°',
      'ì„¼í„°í”„ë ˆìŠ¤ë¡œ ì—˜ë ˆê°•ìŠ¤ ê°•ì¡°',
      'ë² ì´ì§€~ë„¤ì´ë¹„ ì¶•ì˜ ë² ì´ì§ ë°°ìƒ‰'
    ],
    celebrities:{ jp: ['ë©”êµ¬ë¡œ ë Œ'], kr: ['ì •ì—°(TWICE)','ë‚˜ë (KISS OF LIFE)','ì´ì„œ(IVE)','ìœ ë‚˜(ITZY)'], global:['Keira Knightley'] }
  },

  BWLS:{ 
    name:'ê³¨ê²© ë°¤ë¹„(Pure Natural)', base:'NATURAL', emoji:'ğŸ¦Œ', animal:'ì‚¬ìŠ´',
    image:'images/BWLS.jpg',
    concept:'ë¶€ë“œëŸ½ê³  ì¡°ìš©í•œ ì¡°í™”, ìˆ² ì†ì˜ ì•ˆì‹.',
    body:'B=ê³¨ê²©ê° / W=ë„“ìŒ / L=í•˜ì²´ì¤‘ì‹¬ / S=ì§ì„ . ì§ì„  ê³¨ê²©ì— ë¶€ë“œëŸ¬ìš´ ë©´, í…ìŠ¤ì²˜ ë¯¹ìŠ¤ë¡œ ê¹Šì´ë¥¼ ë”í•˜ë©´ â—.',
    brandHints:['nest Robe','Vermeerist BEAMS','Plage','Journal Standard Lâ€™essage'],
    styleNotes:[
      'ì•„ë˜ë¡œ ë–¨ì–´ì§€ëŠ” Aë¼ì¸/ë°”ì´ì–´ìŠ¤',
      'ì½”íŠ¼/ë¦°ë„¨/ê±°ì¦ˆë¡œ ì§ˆê° ë ˆì´ì–´ë“œ',
      'ì†Œí”„íŠ¸ ì»¬ëŸ¬ì˜ ê·¸ë¼ë°ì´ì…˜',
      'ë‚˜ë¬´/ê°€ì£½/ì²œì—° ì†Œì¬ ì•¡ì„¸ì„œë¦¬'
    ],
    celebrities:{ jp: ['í›„ì§€ì´ ì¹´ì œ','ìš”ë„¤ì¦ˆ ì¼„ì‹œ','ë§ˆì¸ ë¬´ë¼ í˜¸ì¿ í† '], kr: ['ì±„ì˜(TWICE)','ë¦¬ì‚¬(BLACKPINK)','ë¯¼ë‹ˆ(I-DLE)','ë·”(BTS)','ì •í•œ(SEVENTEEN)','íƒœìš©(NCT)'], global:['Kristen Stewart'] }
  },

  /* ============== STRAIGHT ============== */
  BNUS:{ 
    name:'ê³¨ê²© í‘œë²”(Sporty Cool)', base:'STRAIGHT', emoji:'ğŸ†', animal:'í‘œë²”',
    image:'images/BNUS.jpg',
    concept:'ëŠ ë¦„í•˜ê³  êµ¬ì¶•ì , ë„ì‹œì ì¸ ëª¨ë“œ.',
    body:'B=ê³¨ê²©ê°•í•¨ / N=ì»´íŒ©íŠ¸ / U=ìƒì²´ì¤‘ì‹¬ / S=ê³¡ì„ ì ìŒ. ë‘ê»˜ë³´ë‹¤ ë¼ˆì˜ êµ¬ì¡°ê°€ ë¨¼ì € ë³´ì´ê³ , ì§ì„ Ã—ìƒì²´ì¤‘ì‹¬ìœ¼ë¡œ "ê°•í•œ ì˜ì§€".',
    brandHints:['Theory','Max Mara','FOXEY','PLST','LE PHIL','TIBI'],
    styleNotes:[
      'í¬ë¡­ ê¸°ì¥ Ã— í•˜ì´ì›¨ì´ìŠ¤íŠ¸ë¡œ ì¤‘ì‹¬ì„ ë” ìœ„ë¡œ',
      'í˜ ìˆëŠ” ì†Œì¬ì˜ Ië¼ì¸ (íƒ€í”„íƒ€/íŠ¸ë¦¬ì•„ì„¸/ìš¸)',
      'í…Œì¼ëŸ¬ë“œ/ë…¸ì¹´ë¼ì˜ ì§ì„ ì¶•',
      'ê³ ëŒ€ë¹„ ë°°ìƒ‰ìœ¼ë¡œ ì„ ëª…í•˜ê²Œ'
    ],
    celebrities:{ jp: ['íˆë¼ë…¸ ì‡¼','ì œì‹œ','ë‹ˆì‹œí•˜íƒ€ ë‹¤ì´ê³ '], kr: ['í—ˆìœ¤ì§„(LE SSERAFIM)','ë¦¬ë…¸(Stray Kids)','ê±´ìš±(ZEROBASEONE)','ì •êµ­(BTS)'], global:['Scarlett Johansson'] }
  },

  MWUC:{ 
    name:'ê³¨ê²© ìƒì–´(Elegant Straight)', base:'STRAIGHT', emoji:'ğŸ¦ˆ', animal:'ìƒì–´',
    image:'images/MWUC.jpg',
    concept:'ì—˜ë ˆê°•ìŠ¤í•˜ê³  ê¸€ë˜ë¨¸ëŸ¬ìŠ¤í•œ ë°”ë””.',
    body:'M=ì§ˆê° / W=ë„“ìŒ / U=ìƒì²´ì¤‘ì‹¬ / C=ê³¡ì„ . ì²´ê°„ì— ë‘ê»˜ê°, ìœ„ìª½ì— ì‹œì„ ì´ ëª¨ì„. ê¸°ëŠ¥ì„± ì†Œì¬ì˜ ê³¡ì„ ì´ ì˜ ì–´ìš¸ë¦¼.',
    brandHints:['NIKE Sportswear','adidas Originals','P.E NATION','COS','UNIQLO U'],
    styleNotes:[
      'ê³¡ì„ ë¯¸ ê°•ì¡° ìŠ¤í‚¤ë‹ˆ Ã— í¬ë¡­ ìƒì˜',
      'ëª¨ë…¸í†¤ì´ë‚˜ í•œìƒ‰ ê³„ì—´ë¡œ ê¹”ë”í•˜ê²Œ',
      'ê´‘íƒì„ ì–µì œí•œ ìŠ¤í¬í‹° ë¯¹ìŠ¤',
      'ë³¼ë¥¨ì€ ìƒ:í•˜ = 6:4 ë¹„ìœ¨ë¡œ'
    ],
    celebrities:{ jp: ['ì¿„ëª¨í†  íƒ€ì´ê°€','ì•„ì¹´ë‹ˆì‹œ ì§„','ë¬´ë¼ì¹´ë¯¸ ì‹±ê³ '], kr: ['ì±„í˜„(Kep1er)','ì•¤í†¤(RIIZE)','RM(BTS)'], global:['Taylor Swift'] }
  },

  MNUC:{ 
    name:'ê³¨ê²© í˜¸ë‘ì´(Glamorous Cool)', base:'STRAIGHT', emoji:'ğŸ…', animal:'í˜¸ë‘ì´',
    image:'images/MNUC.jpg',
    concept:'ì…ì²´ê°ê³¼ ìƒ‰ê¸°, ê°•í•œ ì¡´ì¬ê°.',
    body:'M=ì§ˆê°ê°•í•¨ / N=ì»´íŒ©íŠ¸ / U=ìƒì²´ì¤‘ì‹¬ / C=ê³¡ì„ . ê°€ìŠ´ ì–´ê¹¨ í™ì— ì…ì²´ê°. í—ˆë¦¬ë¥¼ ë†’ê²Œ ì¡ì•„ ì¡°ê°ì²˜ëŸ¼ ì—°ì¶œ.',
    brandHints:['Max Mara','ZARA Premium','THE ROW','LE CIEL BLEU','NÂ°21'],
    styleNotes:[
      'ë‘ê»˜Ã—ì§ì„ ì„ ì‚´ë¦° í¬ë¡­ ìƒì˜',
      'ë‹¤í¬í†¤ì— í¬ì¸íŠ¸ ê´‘íƒ (ì‚¬í‹´/ê°€ì£½)',
      'ì„¸ë¡œ ì•…ì„¼íŠ¸ (ë¡± ëª©ê±¸ì´/ë²¨íŠ¸)',
      'íì„ ì‹ ì–´ ì¤‘ì‹¬ì„ ë” ìœ„ë¡œ'
    ],
    celebrities:{ jp: ['ì‚¬ì¿ ë§ˆ ë‹¤ì´ìŠ¤ì¼€','ì˜¤ì˜¤ë‹ˆì‹œ ë¥˜ì„¸ì´'], kr: ['ëª¨ëª¨(TWICE)','ì•ˆìœ ì§„(IVE)','ì§€ì ¤(aespa)','ë°©ì°¬(Stray Kids)'], global:['Angelina Jolie'] }
  },

  MNUS:{ 
    name:'ê³¨ê²© ê³µì‘(Romantic Mode)', base:'STRAIGHT', emoji:'ğŸ¦š', animal:'ê³µì‘',
    image:'images/MNUS.jpg',
    concept:'í˜ê³¼ ìš°ì•„í•¨ì˜ ê³µì¡´, í™”ë ¤í•œ ì—¬ìš´.',
    body:'M=ì§ˆê° / N=ì»´íŒ©íŠ¸ / U=ìƒì²´ì¤‘ì‹¬ / S=ì§ì„ ë§ìŒ. ì§ì„  ê³¨ê²©ì— ë¶€ë“œëŸ¬ìš´ ê³¡ì„  ìš”ì†Œ. ë‘êº¼ìš´ ì‚¬í‹´ì´ë‚˜ íƒ€í”„íƒ€ë¡œ "ê°•í•¨Ã—ë‹¬ì½¤" ì¡°í™”.',
    brandHints:['Self-Portrait','NÂ°21','SNIDEL(ë“œë ˆìŠ¤)','FOXEY','Apuweiser-riche'],
    styleNotes:[
      'í—ˆë¦¬ ê°•ì¡° í•&í”Œë ˆì–´/í˜í”ŒëŸ¼',
      'ë‘êº¼ìš´ ì‚¬í‹´/íƒ€í”„íƒ€/ìì¹´ë“œì˜ ëŸ­ì…”ë¦¬í•¨',
      'ì£¼ì–¼ë¦¬ëŠ” ì¡´ì¬ê° ìˆëŠ” ë³¼ë¥¨',
      'ìƒ‰ìƒì€ í•œìƒ‰~ì¥¬ì–¼ í†¤ìœ¼ë¡œ í´ë˜ì‹í•˜ê²Œ'
    ],
    celebrities:{ jp: ['ë‹ˆì‹œë…¸ ì¹´ë‚˜','ì´êµ¬ì¹˜ ì‚¬í† ë£¨','ì•„ë¦¬ì˜¤ì¹´ ë‹¤ì´í‚¤'], kr: ['ì˜ˆì§€(ITZY)','ì„±í•œë¹ˆ(ZEROBASEONE)'], global:['Anne Hathaway'] }
  },

  MWUS:{ 
    name:'ê³¨ê²© ëŒê³ ë˜(Soft Active)', base:'STRAIGHT', emoji:'ğŸ¬', animal:'ëŒê³ ë˜',
    image:'images/MWUS.jpg',
    concept:'ê¹”ë”í•œ ìœ ì„ í˜•, ìœ ì—°í•œ ì—­ë™ê°.',
    body:'M=ì§ˆê° / W=ë„“ìŒ / U=ìƒì²´ì¤‘ì‹¬ / S=ì§ì„ . ì§ì„  ë² ì´ìŠ¤ì— ë§¤ë„ëŸ¬ìš´ ìœ ì„ í˜•. ê²½ëŸ‰ ì†Œì¬ë¡œ "ëˆ„ê³„ê°(ì—¬ìœ )".',
    brandHints:['PLEATS PLEASE','ISSEY MIYAKE','UNIQLO U','Theory','Lululemon'],
    styleNotes:[
      'ìœ ì„ í˜•ì„ ê·¸ë¦¬ëŠ” í”Œë¦¬ì¸ /ë“œë ˆì´í”„ (ê³¼í•œ ì…”ë§ X)',
      'ìƒì˜ ì»´íŒ©íŠ¸ Ã— í•˜ì˜ ê¹”ë” í•ìœ¼ë¡œ ë‹¤ë¦¬ ê¸¸ê²Œ',
      'ì¹´ë¼ëŠ” í¬ë£¨/ë³´íŠ¸ë¡œ ê¹¨ë—í•˜ê²Œ',
      'ë°°ìƒ‰ì€ í•œìƒ‰ ì¤‘ì‹¬ìœ¼ë¡œ í´ë¦¬ì–´í•˜ê²Œ'
    ],
    celebrities:{ jp: ['ë¯¸ì•¼ë‹¤í…Œ ë£Œíƒ€','íƒ€ì¹´í‚¤ ìœ ì•¼'], kr: ['ì§€íš¨(TWICE)','ë‹ë‹(aespa)','ë„ê²¸(SEVENTEEN)'], global:['Gal Gadot'] }
  },

  BNUC:{ 
    name:'ê³¨ê²© ì˜¬ë¹¼ë¯¸(Structural Mode)', base:'STRAIGHT', emoji:'ğŸ¦‰', animal:'ì˜¬ë¹¼ë¯¸',
    image:'images/BNUC.jpg',
    concept:'ì •ë°€í•˜ê³  êµ¬ì¶•ì , ë°¤ì— ë¹›ë‚˜ëŠ” ì§€ì„±.',
    body:'B=ê³¨ê²©ê°•í•¨ / N=ì»´íŒ©íŠ¸ / U=ìƒì²´ì¤‘ì‹¬ / C=ê³¡ì„ . ê±´ì¶•ì  ë¼ì¸ì´ ì–´ìš¸ë¦¬ëŠ” ê¶ê·¹ì˜ ê³¡ì„ ì¶•. ëª¨ë…¸í†¤Ã—êµ¬ì¡°ë¡œ ì™„ì„±.',
    brandHints:['COS','Theory','AURALEE','HYKE','Sâ€™YTE','UNIQLO +J'],
    styleNotes:[
      'ìˆ ê¸°ì¥ ì¬í‚·ìœ¼ë¡œ ìƒì²´ ì¤‘ì‹¬ ê°•ì¡°',
      'ê²½ì§ˆ ì†Œì¬ë¡œ ëŒ€ë¹„ë¥¼ ëšœë ·í•˜ê²Œ (ìš¸ ê°œë²„ë”˜/ì½”íŠ¼ íŠ¸ìœŒ)',
      'ëª¨ë…¸í†¤ì´ë‚˜ ì €ì±„ë„ ë°°ìƒ‰',
      'ê¸ˆì† ê³„ì—´ ì•¡ì„¸ì„œë¦¬ë¡œ ì§€ì„±ë¯¸ ë³´ê°•'
    ],
    celebrities:{ jp: ['ë‚˜ì¹´ì§€ë§ˆ ì¼„í† ','ì‚¬ì¿ ë¼ì´ ì‡¼','ì˜¤ë…¸ ì‚¬í† ì‹œ'], kr: ['ë¯¸ë‚˜(TWICE)','ì§€ìˆ˜(BLACKPINK)'], global:['Charlize Theron'] }
  }
};

/* ==== 3ì¹´í…Œê³ ë¦¬ ë¸Œëœë“œ ë¦¬ìŠ¤íŠ¸ (ê·¸ëŒ€ë¡œ ì‚¬ìš©) ==== */
const BRAND_BY_TYPE = {
  /* ============== WAVE ============== */
  BNLS: { 
    high:  ['Valentino','Miu Miu','ChloÃ©','Giambattista Valli','Simone Rocha','Ermanno Scervino','Lanvin'],
    middle:['SNIDEL','CELFORD','LILY BROWN','FRAY I.D','Mila Owen','TOCCA','IÃ‰NA','Apuweiser-riche','Noela','NATURAL BEAUTY BASIC','JILL STUART'],
    fast:  ['ZARA','H&M','UNIQLO','GU','MANGO','Stradivarius','DHOLIC','earth music&ecology']
  },
  MNLC: { 
    high:  ['ChloÃ©','Valentino','Max Mara','Celine','Loewe','AlaÃ¯a'],
    middle:['IÃ‰NA','Plage','N.O.R.C','URBAN RESEARCH','TOMORROWLAND','Mila Owen','ENFÃ–LD','Deuxieme Classe','Spick & Span','UNITED ARROWS','Theory'],
    fast:  ['ZARA','MANGO','COS','& Other Stories','UNIQLO','GU','H&M']
  },
  MWLC: { 
    high:  ['ChloÃ©','Celine','Valentino','Jil Sander','Stella McCartney'],
    middle:['N.O.R.C','IÃ‰NA','BEAUTY&YOUTH','LE PHIL','TOMORROWLAND','Mila Owen','FRAY I.D','SNIDEL','LILY BROWN','PLST'],
    fast:  ['ZARA','COS','UNIQLO','GU','H&M','MANGO','Stradivarius']
  },
  MWLS: { 
    high:  ['Miu Miu','Valentino','REDValentino','ChloÃ©','See By ChloÃ©'],
    middle:['SNIDEL','LILY BROWN','Noela','tocco closet','LOWRYS FARM','earth music&ecology','FRAY I.D','gelato pique','JILL STUART'],
    fast:  ['ZARA','H&M','UNIQLO','GU','GRL','DHOLIC','WEGO']
  },
  MNLS: { 
    high:  ['Dior','Valentino','Chanel','ChloÃ©','Elie Saab'],
    middle:['TOCCA','EPOCA','FOXEY','ANAYI','Apuweiser-riche','IÃ‰NA','CELFORD','SNIDEL','PROPORTION','JILL STUART'],
    fast:  ['ZARA','MANGO','& Other Stories','UNIQLO','GU','H&M']
  },
  BNLC: { 
    high:  ['Loewe','The Row','Celine','Max Mara','Bottega Veneta'],
    middle:['URBAN RESEARCH ROSSO','Plage','JOURNAL STANDARD relume','IÃ‰NA','BEAMS','TOMORROWLAND','Mila Owen','ENFÃ–LD'],
    fast:  ['COS','ZARA','UNIQLO','GU','H&M','MANGO']
  },

  /* ============== NATURAL ============== */
  BWUC: { 
    high:  ['The Row','Jil Sander','Loewe','Bottega Veneta','Celine'],
    middle:['JOURNAL STANDARD','UNITED ARROWS','BEAUTY&YOUTH','AURALEE','YLEVE','TOMORROWLAND','ENFÃ–LD','Deuxieme Classe','Plage'],
    fast:  ['COS','ZARA','ARKET','UNIQLO','H&M','MANGO']
  },
  BWUS: { 
    high:  ['Loewe','Celine','Jil Sander','Isabel Marant','Acne Studios'],
    middle:['ENFÃ–LD','Deuxieme Classe','TOMORROWLAND','athoos','COS','IÃ‰NA','Plage','STUNNING LURE'],
    fast:  ['COS','ZARA','& Other Stories','UNIQLO','H&M','MANGO']
  },
  BWLC: { 
    high:  ['HermÃ¨s','The Row','Loro Piana','Jil Sander','Celine'],
    middle:['IÃ‰NA','Plage','TOMORROWLAND','BEAMS','URBAN RESEARCH','UNITED ARROWS','AURALEE','SCYE','MACKINTOSH'],
    fast:  ['COS','ZARA','UNIQLO','H&M','MANGO','ARKET']
  },
  BWLS: { 
    high:  ['Loewe','Gabriela Hearst','ChloÃ©','JW Anderson'],
    middle:['nest Robe','Vermeerist BEAMS','Plage','Journal Standard Lâ€™essage','ADAM ET ROPÃ‰','TODAYFUL','IÃ‰NA','ANATOMICA'],
    fast:  ['COS','UNIQLO','H&M','ZARA','MANGO']
  },

  /* ============== STRAIGHT ============== */
  BNUS: { 
    high:  ['Saint Laurent','Tom Ford','Givenchy','Alexander McQueen','Max Mara'],
    middle:['Theory','LE PHIL','FOXEY','PLST','Akris punto','HYKE','THE ROW','Drawer'],
    fast:  ['COS','ZARAï¼ˆPremiumï¼‰','UNIQLO','PLST','MANGO','& Other Stories']
  },
  MWUC: { 
    high:  ['Prada Linea Rossa','Moncler','Balenciaga','Stone Island'],
    middle:['NIKE Sportswear','adidas Originals','P.E NATION','Lululemon','DESCENTE ALLTERRAIN','Nanamica','ARCâ€™TERYX VEILANCE'],
    fast:  ['Uniqlo U','UNIQLO','GU','ZARA','H&M']
  },
  MNUC: { 
    high:  ['Dolce & Gabbana','Versace','Balmain','Alexander McQueen','Max Mara'],
    middle:['THE ROW','LE CIEL BLEU','NÂ°21','ZARA Premium','STUNNING LURE','ALLSAINTS','AMERI'],
    fast:  ['ZARA','MANGO','Bershka','UNIQLO','GU','H&M']
  },
  MNUS: { 
    high:  ['Valentino','Elie Saab','Oscar de la Renta','Alexander McQueen','Prada'],
    middle:['Self-Portrait','SNIDEL','FOXEY','Apuweiser-riche','ANAYI','CELFORD','LE PHIL'],
    fast:  ['ZARAï¼ˆEveningï¼‰','& Other Stories','H&M','MANGO','UNIQLO']
  },
  MWUS: { 
    high:  ['Issey Miyake','Pleats Please','HermÃ¨s','Prada'],
    middle:['PLEATS PLEASE','ISSEY MIYAKE','Theory','Lululemon','COS','ATON','UNIQLO U'],
    fast:  ['UNIQLO','GU','ZARA','H&M','COS']
  },
  BNUC: { 
    high:  ['Saint Laurent','Jil Sander','Givenchy','Celine','Tom Ford'],
    middle:['COS','Theory','AURALEE','HYKE','Sâ€™YTE','+J','AKRIS punto'],
    fast:  ['COS','ZARAï¼ˆPremiumï¼‰','UNIQLO','H&M','MANGO']
  }
};

const TYPE_NICK = {
  /* WAVE */
  BNLS:{ label:'ê³¨ê²© ì½”ì•Œë¼',    en:'Koala',     why:'í•˜ì²´ ì¤‘ì‹¬ì˜ í¬ìš©ë ¥ ìˆëŠ” ë¶€ë“œëŸ¬ì›€ê³¼ ë‘¥ê·¼ ê³¡ì„ . ì˜¨í™”í•˜ê³  ì¹œê·¼í•œ ì¸ìƒ.' },
  MNLC:{ label:'ê³¨ê²© ìš¸í”„',    en:'Wolf',      why:'ì¡°ìš©í•˜ê³  ì‹¬ì§€ê°€ êµ³ì€ ê³¡ì„ Ã—ë¶€ë“œëŸ¬ì›€. ë„ì‹œì ì´ê³  ì§€ì ì´ë©° êµ°ë”ë”ê¸° ì—†ëŠ” ë°¸ëŸ°ìŠ¤.' },
  MWLC:{ label:'ê³¨ê²© ë²„í„°í”Œë¼ì´',en:'Butterfly',  why:'ê°€ë³ê²Œ ë°”ëŒì— í©ë‚ ë¦¬ëŠ” ê³¡ì„ . ì–‡ì€ ì†Œì¬Ã—Ië¼ì¸ì´ ë‹ë³´ì´ëŠ” ì—ì–´ë¦¬í•¨.' },
  MWLS:{ label:'ê³¨ê²© í–„ìŠ¤í„°', en:'Hamster',    why:'ì „ì²´ì ìœ¼ë¡œ í­ì‹ í•œ ë‘ê»˜ì™€ ë‘¥ê·¼ ëŠë‚Œ. ì•„ë˜ìª½ì— ì•ˆì •ê°ì´ ìˆëŠ” ì‚¬ë‘ìŠ¤ëŸ¬ìš´ ê°€ë ¨í•¨.' },
  MNLS:{ label:'ê³¨ê²© ë¹„ë‘˜ê¸°',    en:'Dove',      why:'ìƒë°˜ì‹ ì€ í™”ë ¤í•˜ê³  ì•„ë˜ìª½ì€ ì•ˆì •. ë¶€ë“œëŸ¬ìš´ ì§ì„ ìœ¼ë¡œ ìš°ì•„í•˜ê²Œ í’ê¸°ëŠ” í´ë˜ì‹ í˜ë¯¸ë‹Œ.' },
  BNLC:{ label:'ê³¨ê²© í…Œë””',    en:'Teddy',     why:'ì§ì„ ì˜ ì‹¬ì§€ë¥¼ ëŠë¼ë©´ì„œë„ í¬ìš©ê°. ì–´ìŠ¤ ì»¬ëŸ¬ë‚˜ ë–¨ì–´ì§€ëŠ” ì†Œì¬ë¡œ ì¹˜ìœ ì˜ ì•ˆì •ê°.' },

  /* NATURAL */
  BWUC:{ label:'ê³¨ê²© ìœ ë‹ˆì½˜', en:'Unicorn',   why:'ê¸´ íŒ”ë‹¤ë¦¬ì™€ ê³¡ì„  í”„ë ˆì„. ì—¬ë°±ì„ ì‚´ë¦¬ëŠ” ë¯¸ë‹ˆë©€ ë£©ì´ ë‹ë³´ì´ëŠ” í™˜ìƒÃ—êµ¬ì¡°.' },
  BWUS:{ label:'ê³¨ê²© ë…ìˆ˜ë¦¬',   en:'Eagle',     why:'ìƒì²´ ì¤‘ì‹¬ì˜ ê°€ë²¼ì›€ê³¼ íˆ¬ì² í•œ ì§€ì„±. ì§ì„  ë² ì´ìŠ¤ì— ì•„ì£¼ ì•½ê°„ì˜ ê³¡ì„ ìœ¼ë¡œ ê³µê¸°ê°.' },
  BWLC:{ label:'ê³¨ê²© ì—¬ìš°', en:'Fox',       why:'ë‹¨ì •í•˜ê³  ê¸°ë¯¼í•¨, ìì—°ì²´ì˜ í’ˆê²©. ì–‡ì€ í…Œì¼ëŸ¬ë“œë‚˜ ì„¼í„°í”„ë ˆìŠ¤ê°€ ì˜ ì–´ìš¸ë¦¼.' },
  BWLS:{ label:'ê³¨ê²© ë°¤ë¹„',     en:'Bambi',     why:'ì§ì„  ê³¨ê²©ì— ë¶€ë“œëŸ¬ìš´ ë©´. ìì—° ì†Œì¬ ë ˆì´ì–´ë“œë¡œ ìˆ²ê³¼ ê°™ì€ ê³ ìš”í•¨.' },

  /* STRAIGHT */
  BNUS:{ label:'ê³¨ê²© í‘œë²”',   en:'Panther',   why:'ìƒì²´ ì¤‘ì‹¬Ã—ì§ì„ ìœ¼ë¡œ ë²¼ë ¤ì§„ êµ¬ì¶•ë¯¸. ë„ì‹œì ì´ê³  ëŠ ë¦„í•œ ë¬´ë“œ.' },
  MWUC:{ label:'ê³¨ê²© ìƒì–´',   en:'Shark',     why:'ê¸€ë˜ë¨¸ëŸ¬ìŠ¤í•œ ê³¡ì„ ê³¼ ê¸°ëŠ¥ë¯¸. í¬ë¡­Ã—í…Œì´í¼ë“œì˜ ìŠ¤í¬í‹° í´ë¦°.' },
  MNUC:{ label:'ê³¨ê²© í˜¸ë‘ì´',   en:'Tiger',     why:'ì…ì²´ì ì¸ ë‘ê»˜ê°ê³¼ ì¡´ì¬ê°. ë†’ì€ í—ˆë¦¬ ë§ˆí¬ë¡œ ì¡°ê°ì²˜ëŸ¼ ë§¤ë ¥ ë°œì‚°.' },
  MNUS:{ label:'ê³¨ê²© ê³µì‘', en:'Peacock',   why:'ê°•í•¨ì— ì¥ì‹ì„±ì´ ê³µì¡´. ë‘êº¼ìš´ ì‚¬í‹´ì´ë‚˜ ì£¼ì–¼ë¦¬ë¡œ "ê°•í•¨Ã—ë‹¬ì½¤"ì˜ í™”ë ¤í•¨.' },
  BNUC:{ label:'ê³¨ê²© ì˜¬ë¹¼ë¯¸',     en:'Owl',       why:'ê±´ì¶•ì ì¸ ê³¡ì„ ê³¼ ì§€ì„±. ëª¨ë…¸í†¤Ã—êµ¬ì¡°ë¡œ ë°¤ì— ë¹›ë‚˜ëŠ” ì •ë°€í•¨.' },
  MWUS:{ label:'ê³¨ê²© ëŒê³ ë˜', en:'Dolphin',   why:'ë§¤ë„ëŸ¬ìš´ ìœ ì„ í˜•ì˜ ê²½ì¾Œí•¨. í”Œë¦¬ì¸ ë‚˜ ë“œë ˆì´í”„ë¡œ ìœ ì—°í•˜ê²Œ.' },
};

/* ==== Body Balance Tips (í•œêµ­ì–´) ==== */
const BODY_TIPS = {
  /* WAVE */
  BNLS: { goal: "í•˜ì²´ ì¤‘ì‹¬ì„ ê°€ë³ê²ŒÂ·ì‹œì„ ì„ ìœ„ë¡œ", diet_do: ["ë§¤ë¼ ë‹¨ë°±ì§ˆ 20g ì´ìƒ", "ì—¼ë¶„/ë¶“ê¸° ê´€ë¦¬ (ì¹¼ë¥¨/ìˆ˜ë¶„)"], diet_avoid: ["ì„¤íƒ• ë§ì€ ìŒë£Œ", "ê¸°ë¦„Ã—ë°€ê°€ë£¨ ì¤‘ë³µ ì„­ì·¨"], train_strength: ["í™ ì“°ëŸ¬ìŠ¤íŠ¸", "ì‚¬ì´ë“œ ë ˆê·¸ ë¦¬í”„íŠ¸", "í´ë¨ì‰˜"], train_cardio: ["ê²½ì‚¬ ê±·ê¸°", "ì¼ë¦½í‹°ì»¬"], mobility: ["ì¥ìš”ê·¼ ìŠ¤íŠ¸ë ˆì¹­", "ì¢…ì•„ë¦¬ íŒí”„ ìš´ë™"], care: ["ì••ë°• ìŠ¤íƒ€í‚¹/ë¦¼í”„ ë§ˆì‚¬ì§€", "ê³¨ë°˜ ì „ë°©ê²½ì‚¬ ê°œì„ "], quick: ["ì§§ì€ ìƒì˜/ëª© ì£¼ë³€ í¬ì¸íŠ¸ë¡œ ê°€ë²¼ì›€ ì—°ì¶œ"] },
  MNLC: { goal: "ì„¸ë¡œ ë¼ì¸ ê°•ì¡°Â·ë‹¤ë¦¬ ë³¼ë¥¨ ì •ë¦¬", diet_do: ["ì €ì§€ë°© ê³ ë‹¨ë°± (ë‹­ê°€ìŠ´ì‚´/í°ì‚´ìƒì„ )", "ì‹ì´ì„¬ìœ ë¡œ í¬ë§Œê°"], diet_avoid: ["ì•¼ê°„ ì—¼ë¶„ ê³¼ë‹¤", "ë°€ê°€ë£¨ ê°„ì‹"], train_strength: ["ìŠ¤ì¿¼íŠ¸", "í™ íŒì§€", "ë ˆê·¸ ìµìŠ¤í…ì…˜"], train_cardio: ["ì¸í„°ë²Œ ë¹¨ë¦¬ ê±·ê¸°", "ì‹¤ë‚´ ìì „ê±°"], mobility: ["í–„ìŠ¤íŠ¸ë§/ë‘”ê·¼ ìŠ¤íŠ¸ë ˆì¹­", "ë°œëª© ê°€ë™ì„±"], care: ["ë¶“ê¸° ì¼€ì–´ (ì¡±ìš•/ë§ˆì‚¬ì§€)"], quick: ["ìƒì˜ ì»´íŒ©íŠ¸Ã—í•˜ì´ì›¨ì´ìŠ¤íŠ¸ë¡œ ì¤‘ì‹¬ UP"] },
  MWLC: { goal: "ê²½ëŸ‰ ì§ì„  ë§Œë“¤ê¸°, ì•„ë˜ ë¬´ê²Œ ì¤„ì´ê¸°", diet_do: ["ë‹¨ë°±ì§ˆ+ì±„ì†Œ ë¨¼ì € ë¨¹ê¸°", "ìˆ˜ë¶„ 2L/ì¼"], diet_avoid: ["íŠ€ê¹€ ì—°ì† ì„­ì·¨", "ì‹¬ì•¼ ê³¼ì"], train_strength: ["ë°ë“œë²„ê·¸", "ë¶ˆê°€ë¦¬ì•ˆ ìŠ¤ì¿¼íŠ¸", "ì¹´í”„ ë ˆì´ì¦ˆ"], train_cardio: ["ë¡± ì›Œí¬ (30-40ë¶„)"], mobility: ["ê³ ê´€ì ˆ/í–„ìŠ¤íŠ¸ë§ ë™ì  ìŠ¤íŠ¸ë ˆì¹­"], care: ["ìì„¸â€”ê°€ìŠ´ í´ê¸° (ë¼ìš´ë“œìˆ„ë” ë°©ì§€)"], quick: ["Ië¼ì¸ ì–‡ì€ ì…”ì¸ ë¡œ ì„¸ë¡œì„  ê°•ì¡°"] },
  MWLS: { goal: "ì „ì²´ì˜ 'ë¶€í•¨'ì„ ì¡ê³ , ìœ„ìª½ í¬ì¸íŠ¸", diet_do: ["ë‹¨ë°±ì§ˆ+ë”°ëœ»í•œ ìˆ˜í”„", "ê°„ì‹ì€ ê²¬ê³¼ë¥˜/ìš”ê±°íŠ¸"], diet_avoid: ["ì„¤íƒ• í”„ë¼í‘¸ì¹˜ë…¸ë¥˜", "ë°€ê°€ë£¨Ã—ì§€ë°© ì„¸íŠ¸"], train_strength: ["í”Œë­í¬", "í™ ì–´ë¸Œë•ì…˜", "ë²„ë“œë…"], train_cardio: ["ë¦¬ë“¬ ì›Œí‚¹"], mobility: ["í‰ì¶” íšŒì „/ê²¬ê°‘ê³¨ í’€ê¸°"], care: ["ìƒì˜ ì§§ê²ŒÂ·ì†Œí’ˆ ìœ„ë¡œ"], quick: ["ìˆ ê°€ë””ê±´+í•˜ì´ì›¨ì´ìŠ¤íŠ¸ë¡œ ì¦‰ì‹œ ê²½ì¾Œí•˜ê²Œ"] },
  MNLS: { goal: "ìƒì²´ í™”ë ¤í•¨ ìœ ì§€Â·í•˜ì²´ ë¼ì¸ ìœ ì„ í˜•", diet_do: ["ì² ë¶„Â·ì•„ì—°Â·ë¹„íƒ€ë¯¼Bêµ°", "ì–‘ì§ˆì˜ ì§€ë°© (ë“±í‘¸ë¥¸ìƒì„ /ì˜¬ë¦¬ë¸Œ)"], diet_avoid: ["ì—¼ë¶„ ê³¼ë‹¤", "ëŠ¦ì€ ì‹œê°„ íƒ„ìˆ˜í™”ë¬¼ í­ì‹"], train_strength: ["ê¸€ë£¨íŠ¸ ë¸Œë¦¿ì§€", "ë ˆê·¸ ì»¬", "ë‚´ì „ê·¼ ìš´ë™"], train_cardio: ["ìˆ˜ì˜/í¬ë¡¤"], mobility: ["í™ í”Œë ‰ì„œ/ì¥ìš”ê·¼"], care: ["ì§„ì£¼ ë“± ì‘ì€ ì•¡ì„¸ì„œë¦¬ë¡œ ìƒì²´ ì´ˆì "], quick: ["ë¨¸ë©”ì´ë“œÃ—ìˆ ìì¼“ìœ¼ë¡œ í’ˆê²©Ã—ê°€ë²¼ì›€"] },
  BNLC: { goal: "í¬ìš©ê°ì€ ë‚¨ê¸°ë˜, ìœ¤ê³½ì„ ìƒ¤í”„í•˜ê²Œ", diet_do: ["ë”°ëœ»í•œ êµ­ë¬¼ ë¨¼ì €", "ë‹¨ë°±ì§ˆ 20g+ê°ˆìƒ‰ì§€ë°© í™œì„±(ì˜¨ëƒ‰ìš•)"], diet_avoid: ["ë‹¨ ìŒë£Œ", "ê¸°ë¦„ì§„ ì•¼ì‹"], train_strength: ["ë¡± í™ ì“°ëŸ¬ìŠ¤íŠ¸", "ë¡œì‰"], train_cardio: ["ê²½ì‚¬ ê±·ê¸°"], mobility: ["ë“±/ê°€ìŠ´ ìŠ¤íŠ¸ë ˆì¹­"], care: ["ìƒë°˜ì‹ ì— ë°ê¸° ì°¨ì´ 1ì "], quick: ["ë¡± ê°€ë””ê±´ìœ¼ë¡œ ê°ì‹¸ë©´ì„œ ì„¸ë¡œì„  ì¶”ê°€"] },

  /* NATURAL */
  BWUC: { goal: "í•˜ì²´ë¥¼ ì¡°ì´ê³ , ìƒì²´ êµ¬ì¡° ë³´ì—¬ì£¼ê¸°", diet_do: ["ì¶©ë¶„í•œ ì´ ì¹¼ë¡œë¦¬ (ë„ˆë¬´ ë§ˆë¦„ ë°©ì§€)", "ìš´ë™ ì „í›„ íƒ„ìˆ˜í™”ë¬¼"], diet_avoid: ["ê·¹ë‹¨ì  ë‹¹ì§ˆ ì œí•œ", "ë¼ë‹ˆ ê±°ë¥´ê¸°"], train_strength: ["í™ íŒì§€", "ì¹´í”„ ë ˆì´ì¦ˆ", "ë³µê·¼ ë¡¤ëŸ¬"], train_cardio: ["ìì „ê±° (ê²½~ì¤‘ê°•ë„)"], mobility: ["ë°œëª©/í–„ìŠ¤íŠ¸ë§ ë™ì  ê°€ë™"], care: ["ìì„¸ (ê³¨ë°˜ ì¤‘ë¦½)"], quick: ["ë°•ì‹œ ìì¼“Ã—ìŠ¤íŠ¸ë ˆì´íŠ¸ íŒ¬ì¸ "] },
  BWUS: { goal: "ìƒì²´ ê°€ë³ê²ŒÂ·í•˜ì²´ ì§ì„  í†µê³¼", diet_do: ["ë‹¨ë°±ì§ˆ+íƒ„ìˆ˜í™”ë¬¼ ê· ë“± ë°°ë¶„", "ì¹´í˜ì¸ì€ ì˜¤ì „ì—"], diet_avoid: ["ì—¼ë¶„ê³¼ ê°€ê³µìœ¡ ëˆ„ì "], train_strength: ["ì˜¤ë²„í—¤ë“œ í”„ë ˆìŠ¤(ê°€ë³ê²Œ)", "ë¡œìš°", "ìŠ¤í”Œë¦¿ ìŠ¤ì¿¼íŠ¸"], train_cardio: ["ì¡°ê¹… or ë¹¨ë¦¬ ê±·ê¸°"], mobility: ["í‰ì¶” ì‹ ì „Â·ê²¬ê°‘ê³¨"], care: ["ê¸ˆì† ì•¡ì„¸ì„œë¦¬ë¡œ ë¬´ê¸°ì§ˆ ê²½ëŸ‰í™”"], quick: ["ë¹… ìƒì˜Ã—ì§ì„  í•˜ì˜ë¡œ ê³µê¸°ê°"] },
  BWLC: { goal: "ë‹¨ì •í•œ ì§ì„  ìœ ì§€, ê°€ë™ì—­ í™•ë³´", diet_do: ["ì•„ì¹¨ì— ì–‘ì§ˆ ë‹¨ë°±ì§ˆ", "ìˆ˜ë¶„ 1.5â€“2L"], diet_avoid: ["ë°¤ì˜ ê³ ì§€ë°©ì‹"], train_strength: ["ë²¤ì¹˜ ì„œí¬íŠ¸ ë¡œìš°", "ìŠ¤ì¿¼íŠ¸", "í™ íŒì§€"], train_cardio: ["í…œí¬ ì›Œí¬ 30ë¶„"], mobility: ["í–„ìŠ¤íŠ¸ë§/ê³ ê´€ì ˆ ì •ì  ìŠ¤íŠ¸ë ˆì¹­"], care: ["ì„¼í„°í”„ë ˆìŠ¤/ì…”ì¸ ë¡œ ë‹¨ì •í•¨ UP"], quick: ["ì–‡ì€ í…Œì¼ëŸ¬ë“œ+ìŠ¤íŠ¸ë ˆì´íŠ¸ë¡œ ì¦‰ì‹œ í’ˆê²©"] },
  BWLS: { goal: "ì§ì„  ê³¨ê²©ì˜ ë”±ë”±í•¨ í’€ê¸°", diet_do: ["ë”°ëœ»í•œ êµ­ë¬¼/ë°œíš¨ì‹í’ˆ", "ì¹¼ë¥¨ (í•´ì¡°ë¥˜/ê³¼ì¼)"], diet_avoid: ["ì°¬ ë‹¨ ìŒì‹ ê³¼ë‹¤"], train_strength: ["êµ¿ëª¨ë‹(ê°€ë³ê²Œ)", "ëŸ°ì§€"], train_cardio: ["ìŠ¬ë¡œìš° ì¡°ê¹…"], mobility: ["ê³ ê´€ì ˆ/ì¥ê²½ì¸ëŒ€/ì¢…ì•„ë¦¬ í’€ê¸°"], care: ["ìì—° ì†Œì¬Ã—Aë¼ì¸ìœ¼ë¡œ ë¶€ë“œëŸ¬ì›€"], quick: ["ì§ˆê° ë¯¹ìŠ¤(ì½”íŠ¼Ã—ë¦°ë„¨)ë¡œ ê¹Šì´ê°"] },

  /* STRAIGHT */
  BNUS: { goal: "ìƒì²´ ì¤‘ì‹¬ ì‚´ë ¤ ì„¸ë¡œì„  ê°•í™”", diet_do: ["ê³ ë‹¨ë°± (ì²´ì¤‘Ã—1.5g)", "ì‹ì´ì„¬ìœ ë¡œ í˜ˆë‹¹ ì™„ë§Œí•˜ê²Œ"], diet_avoid: ["íŠ€ê¹€Ã—ë°€ê°€ë£¨", "ì•¼ê°„ ê³¼ì‹"], train_strength: ["ìˆ ë ˆì¸ì§€ ìŠ¤ì¿¼íŠ¸", "ìˆ„ë” í”„ë ˆìŠ¤", "ë¡œìš°"], train_cardio: ["HIIT 10ë¶„ or ê²½ì‚¬ ê±·ê¸°"], mobility: ["ê°€ìŠ´/ì–´ê¹¨ ì•ìª½ ì—´ê¸°"], care: ["ê³ ëŒ€ë¹„ ë°°ìƒ‰ìœ¼ë¡œ ìƒ¤í”„í•˜ê²Œ"], quick: ["í¬ë¡­Ã—í•˜ì´ì›¨ì´ìŠ¤íŠ¸ë¡œ ìˆœì‹ê°„ì— ë‹¤ë¦¬ ê¸¸ì´"] },
  MWUC: { goal: "ë‘ê»˜ê° ì •ë¦¬í•˜ê³  í´ë¦°í•˜ê²Œ", diet_do: ["PFC ë°¸ëŸ°ìŠ¤ (P:30/F:25/C:45)", "ìˆ˜ë¶„ 2L"], diet_avoid: ["ë‹¬ì½¤í•œ ë¼ë–¼Â·ë¹µ"], train_strength: ["í™ íŒì§€", "ì²´ìŠ¤íŠ¸ í”„ë ˆìŠ¤", "ë ˆê·¸ í”„ë ˆìŠ¤"], train_cardio: ["íŠ¸ë ˆë“œë°€ ê²½ì‚¬"], mobility: ["ê³ ê´€ì ˆ/í‰ì¶” ê°€ë™ì„±"], care: ["ìŠ¤í¬í‹° ë¯¹ìŠ¤ë¡œ ì²­ê²°ê°"], quick: ["ëª¨ë…¸í†¤Ã—ê¸°ëŠ¥ì„± ì†Œì¬ë¡œ ê¹”ë”"] },
  MNUC: { goal: "ê³¡ì„  ì…ì²´ë¥¼ ì¡°ê°ì  ì„¸ë¡œì„ ìœ¼ë¡œ", diet_do: ["ê³ ë‹¨ë°±+ì €GI", "ì €ë…ì€ íƒ„ìˆ˜í™”ë¬¼ ì ê²Œ"], diet_avoid: ["ì¦ì€ ìŒì£¼", "ê¸°ë¦„ì§„ ì™¸ì‹"], train_strength: ["í™ ì“°ëŸ¬ìŠ¤íŠ¸", "ë˜íŠ¸ í’€ ë‹¤ìš´", "ì‚¬ì´ë“œ í”Œë­í¬"], train_cardio: ["ì¸í„°ë²Œ ê±·ê¸°"], mobility: ["ì¥ìš”ê·¼/ê°€ìŠ´ ìŠ¤íŠ¸ë ˆì¹­"], care: ["ë‹¤í¬í†¤Ã—í¬ì¸íŠ¸ ê´‘íƒìœ¼ë¡œ ì¡°ì´ê¸°"], quick: ["í—ˆë¦¬ ê°•ì¡° í•&í”Œë ˆì–´"] },
  MNUS: { goal: "ê°•í•¨Ã—ë‹¬ì½¤ ë°¸ëŸ°ìŠ¤ë¥¼ ì½”ì–´ë¡œ ì§€ì§€", diet_do: ["ë‹¨ë°±ì§ˆ+ì±„ì†Œ 2ì ‘ì‹œ", "ê°„ì‹ì€ í”„ë¡œí‹´ or ì¹˜ì¦ˆ"], diet_avoid: ["ì„¤íƒ• ë§ì€ ìŒë£Œ", "ë°¤ ìŠ¤ë‚µ"], train_strength: ["ë°ë“œë¦¬í”„íŠ¸(ê°€ë³ê²Œ)", "í‘¸ì‰¬ì—…", "í™ ì–´ë¸Œë•ì…˜"], train_cardio: ["ì €ê°•ë„ ìœ ì‚°ì†Œ"], mobility: ["í‰ê³½/ê²¬ê°‘ê³¨ ê°€ë™"], care: ["ì¡´ì¬ê° ìˆëŠ” ì£¼ì–¼ë¦¬ëŠ” 1ê°œë¡œ ì§‘ì•½"], quick: ["í˜í”ŒëŸ¼/íƒ€í”„íƒ€ë¡œ ìƒì²´ ì§‘ì¤‘"] },
  MWUS: { goal: "ìœ ì„ í˜• ìœ ì§€í•˜ë©° ì½”ì–´ë¡œ ì¡°ì´ê¸°", diet_do: ["ë‹¨ë°±ì§ˆ ì²´ì¤‘Ã—1.2g", "ë‹¹ì§ˆì€ í™œë™ëŸ‰ ë§ì¶° ì¡°ì ˆ"], diet_avoid: ["ê¸°ë¦„Ã—ê°€ë£¨ ê³¼ì‹", "ì‹¬ì•¼ ë””ì €íŠ¸"], train_strength: ["í”Œë¦¬ì¸  ì˜ì‹ ì½”ì–´: ë¡¤ì—…", "ëŸ°ì§€"], train_cardio: ["ìì „ê±°/ì—ì–´ë¡œë¹…"], mobility: ["ì¥ìš”ê·¼/í–„ìŠ¤íŠ¸ë§ ë™ì "], care: ["ê¹”ë”í•œ ì¹´ë¼Â·í•œìƒ‰ìœ¼ë¡œ í´ë¦¬ì–´"], quick: ["ìƒì˜ ì»´íŒ©íŠ¸Ã—Ië¼ì¸ìœ¼ë¡œ ì¦‰ì‹œ ë‹¤ë¦¬ ê¸¸ì´"] },
  BNUC: { goal: "ê±´ì¶•ì  ë¼ì¸ì„ ë‹ë³´ì´ê²Œ ì¡°ì´ê¸°", diet_do: ["ê³ ë‹¨ë°±Â·ì €ì§€ë°©", "ì‹ì´ì„¬ìœ ë¡œ í˜ˆë‹¹ ì¡°ì ˆ"], diet_avoid: ["ë¹µ/íŠ€ê¹€ ì—°ì† ì„­ì·¨"], train_strength: ["í–‰ì‰ ë‹ˆ ë ˆì´ì¦ˆ", "ë£¨ë§ˆë‹ˆì•ˆ ë°ë“œë¦¬í”„íŠ¸"], train_cardio: ["ê²½ì‚¬ ê±·ê¸° or í¬ë¡œìŠ¤ ë°”ì´í¬"], mobility: ["í–„ìŠ¤íŠ¸ë§/ë‘”ê·¼Â·ê°€ìŠ´"], care: ["ëª¨ë…¸í†¤Ã—ì»¤íŒ…ìœ¼ë¡œ ì§€ì„± ê°•ì¡°"], quick: ["ìˆ ìì¼“ìœ¼ë¡œ ìƒì²´ ì¤‘ì‹¬ ëª…í™•í™”"] }
};

function nickOf(code){ return TYPE_NICK[code]?.label ?? code; }
function nickEn(code){ return TYPE_NICK[code]?.en ?? ''; }
function whyOf(code){  return TYPE_NICK[code]?.why ?? ''; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì„¤ëª…/ì œì•ˆ ë¡œì§ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function describeBodyByCode(code){
  const [a,b,c,d]=code.split('');
  const p1=(a==='B')?'ê³¨ê²©ì´ë‚˜ ê´€ì ˆì˜ ì¡´ì¬ê°ì´ ë² ì´ìŠ¤':'ìœ¡ê°Â·ê·¼ìœ¡ì˜ ë‘ê»˜ê°ì´ ë² ì´ìŠ¤';
  const p2=(b==='W')?'ì „ì²´ì ìœ¼ë¡œ ê²½ì¾Œí•˜ê³  ì„¬ì„¸í•¨':'ì „ì²´ì ìœ¼ë¡œ ì¤‘í›„í•˜ê³  ì•ˆì •ê° ìˆìŒ';
  const p3=(c==='U')?'ìƒì²´ ì¤‘ì‹¬ì´ë¼ ìƒë°˜ì‹ ì— ì‹œì„ ì´ ê°€ê¸° ì‰¬ì›€':'í•˜ì²´ ì¤‘ì‹¬ì´ë¼ í•˜ë°˜ì‹ ì— ì•ˆì •ê°ì´ ìˆìŒ';
  const p4=(d==='S')?'ìœ¤ê³½ì€ ì§ì„ ì ì´ê³  ìƒ¤í”„í•¨':'ìœ¤ê³½ì€ ê³¡ì„ ì ì´ê³  ì†Œí”„íŠ¸í•¨';
  return `ã€ê³¨ê²© ì¸ìƒ ìš”ì•½ã€‘${p1}. ${p2}. ${p3}. ${p4}.`;
}

function autoBrands(code, base){
  const [a,b,c,d]=code.split('');
  const core={WAVE:['SNIDEL','Lily Brown','Mila Owen','IÃ‰NA','N.O.R.C','URBAN RESEARCH ROSSO'],
              NATURAL:['JOURNAL STANDARD','IÃ‰NA','UNITED ARROWS','BEAUTY&YOUTH','BEAMS','TOMORROWLAND'],
              STRAIGHT:['Theory','Max Mara','PLST','UNIQLO U','COS','ZARA Premium']};
  const addLine=(d==='S')?['COS','Theory','AURALEE']:['SNIDEL','TOCCA','CELFORD'];
  const addDen=(b==='W')?['Deuxieme Classe','ENFÃ–LD']:['Max Mara','STUNNING LURE'];
  const addBal=(c==='U')?['Drawer','FOXEY']:['URBAN RESEARCH','Spick & Span'];
  return [...new Set([...(core[base]||[]),...addLine,...addDen,...addBal])].slice(0,7);
}
function autoStyle(code){
  const [a,b,c,d]=code.split('');
  const fabric=(b==='N')?['ì–‡ì€ ìš¸','ì‰¬í°/ì¡°ì ¯','ìŠ¤ë¬´ìŠ¤ ë‹ˆíŠ¸']:['ì¤‘ê°„~ë‘êº¼ìš´ ìš¸','í˜ ìˆëŠ” íŠ¸ìœŒ','ì‚¬í‹´/ìì¹´ë“œ'];
  const neck=(d==='S')?['í¬ë£¨/ë³´íŠ¸','ìŠ¤íƒ ë“œ ì¹´ë¼','ì–•ì€ V ì…”ì¸ ']:['ë¼ìš´ë“œ/ìŠ¤ì¹´í”„ íƒ€ì´','í•˜íŠ¸ ë„¥','Vë„¥ï¼‹ë“œë ˆì´í”„'];
  const silhouette=(c==='U')?['ì§§ì€ ìƒì˜ Ã— í•˜ì´ì›¨ì´ìŠ¤íŠ¸','Ië¼ì¸ ì›í”¼ìŠ¤','ì»´íŒ©íŠ¸ ìì¼“']:['ë¡± ìƒì˜ Ã— íë¥´ëŠ” í•˜ì˜','Aë¼ì¸/í”Œë ˆì–´','ë“œë¡­ ìˆ„ë”'];
  const lines=(d==='S')?['ì„¼í„° í”„ë ˆìŠ¤','ìŠ¤íŠ¸ë ˆì´íŠ¸ ìŠ¤ì»¤íŠ¸','í…Œì¼ëŸ¬ë“œ']:['ë°”ì´ì–´ìŠ¤/ë“œë ˆì´í”„','ë¨¸ë©”ì´ë“œ/í”Œë ˆì–´','ì…”ë§ ì ë‹¹íˆ'];
  return {fabric,neck,silhouette,lines};
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ UI ë Œë”ë§ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const $=(s,el=document)=>el.querySelector(s);
const app=document.getElementById('app');
let state = makeInitialState();

function render(){
  app.innerHTML='';
  if(state.step===0) return renderIntro();
  if(state.step>=1 && state.step<=4) return renderAxis(AXES[state.step-1]);
  if(state.step===5) return renderResult();
}

function renderIntro(){
  const el = document.createElement('div');
  el.innerHTML = `
    <section class="card hero-card intro-card">
      <h2>4ê°€ì§€ ì¸ìƒ ì¶•ìœ¼ë¡œ ì§„ë‹¨í•˜ëŠ” 16íƒ€ì…</h2>
      <p class="kawaii-lede">
      48ê°œì˜ ì§ˆë¬¸ìœ¼ë¡œ ë‹¹ì‹ ì˜ ã€Œê³¨ê²© Ã— ì¸ìƒã€ì„ <b>Frame / Surface / Balance / Line</b> 4ì¶•ìœ¼ë¡œ ì ìˆ˜í™”! ì¡°í•©ì„ í†µí•´ 4ê¸€ì ì½”ë“œë¥¼ ìƒì„±í•˜ê³ , íƒ€ì…ë³„ ì»¨ì…‰Â·ì–´ìš¸ë¦¬ëŠ” ë¸Œëœë“œÂ·ìŠ¤íƒ€ì¼ë§ì„ ê·€ì—½ê²Œ ì œì•ˆí•©ë‹ˆë‹¤â™¡
      </p>

      <div class="pill-list">
        <span class="pill"><span class="key">F</span> Frame (ê³¨ê²©â†”ìœ¡ê°)</span>
        <span class="pill"><span class="key">S</span> Surface (ë„“ìŒâ†”ì¢ìŒ)</span>
        <span class="pill"><span class="key">B</span> Balance (ìƒâ†”í•˜)</span>
        <span class="pill"><span class="key">L</span> Line (ì§ì„ â†”ê³¡ì„ )</span>
      </div>

      <div class="controls" style="margin-top:14px;">
        <button id="start">ì§„ë‹¨ ì‹œì‘í•˜ê¸°</button>
      </div>

      <div class="controls" style="margin-top:14px;">
        <button id="about" class="secondary">ì‚¬ìš©ë²•</button>
      </div>

      <div class="note-bubble">
        ì „ì²´ 16íƒ€ì…ì€ <b>ê°¤ëŸ¬ë¦¬</b>ì—ì„œ í•œë²ˆì— í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²°ê³¼ëŠ” ìº¡ì²˜ ì €ì¥ì„ ì¶”ì²œí•´ìš”!
      </div>
    </section>
  `;

  const axisCards = AXES.map(ax => `
    <article class="axis-card" data-axis="${ax.key}">
      <h4>${ax.label} <span class="axis-chip">${ax.key.toUpperCase()}</span></h4>
      <div class="axis-scale">
        <div class="axis-bar"></div>
        <div class="axis-ends">
          <span>${ax.negLabel}</span><span>${ax.posLabel}</span>
        </div>
      </div>
    </article>
  `).join('');

  const cuteAxes = `
    <section class="axis-section">
      <div class="axis-head">
        <h3>íŒì •ì— ì‚¬ìš©í•˜ëŠ” 4ê°€ì§€ ì¶•</h3>
        <span class="sub">Frame / Surface / Balance / Line</span>
      </div>
      <div class="axis-grid">${axisCards}</div>
    </section>
  `;

  const anchor = el.querySelector('.intro-card');
  if (anchor) anchor.insertAdjacentHTML('afterend', cuteAxes);
  else el.insertAdjacentHTML('beforeend', cuteAxes);

  app.innerHTML = '';
  app.appendChild(el);

  el.querySelector('#start')?.addEventListener('click', () => {
    state.step = 1;
    render();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  el.querySelector('#about')?.addEventListener('click', () => {
    alert(
`ã€ì‚¬ìš©ë²•ã€‘
ãƒ»ê° ì¶• 4ë¬¸í•­Ã—5ë‹¨ê³„ë¡œ ë‹µë³€í•˜ë©´, 4ê°œì˜ ì¶• ì ìˆ˜ì—ì„œ 4ê¸€ì ì½”ë“œë¥¼ ìƒì„±.
ãƒ»ê²°ê³¼ í™”ë©´ì—ì„œëŠ” ã€Œíƒ€ì…ëª…ï¼ë™ë¬¼ ëª¨í‹°ë¸Œï¼ì–´ìš¸ë¦¬ëŠ” ë¸Œëœë“œï¼ìŠ¤íƒ€ì¼ë§ ì§€ì¹¨ï¼ê¶í•© ì‰ì–´ã€ë¥¼ í‘œì‹œ.
ãƒ»ìŠ¤í¬ë¦°ìƒ· ì €ì¥ì´ë‚˜ ë§í¬ ê³µìœ ë„ OK!`
    );
  });
}

function renderAxis(axis){
  const {key,label,posLabel,negLabel} = axis;
  const qs = QUESTIONS[key];
  const progress = (state.step/5)*100;

  app.innerHTML = '';
  const el = document.createElement('div');
  el.innerHTML = `
    <div class="footer" style="margin-bottom:10px">
      <div class="pill">${state.step}/4ï¼š${label}</div>
      <div class="progress" style="width:58%">
        <div class="bar" style="width:${progress}%"></div>
      </div>
    </div>

    <div class="grid">
      ${qs.map((q,i)=>`
        <div class="q">
          <h4>${i+1}. ${q.t}</h4>

          <div class="scale-btns" data-i="${i}">
            ${[1,2,3,4,5].map(v=>`
              <button type="button"
                class="opt ${v===Number(state.answers[key][i])?'active':''}"
                data-v="${v}" data-i="${i}" aria-pressed="${v===Number(state.answers[key][i])}">
                ${v}
              </button>
            `).join('')}
          </div>

          <div class="muted">
            ì•„ë‹ˆë‹¤â†”ê·¸ë ‡ë‹¤ï¼š<span id="v-${key}-${i}">${state.answers[key][i]}</span> / 5
          </div>
        </div>
      `).join('')}
    </div>

    <div class="footer">
      <div class="controls">
        <button class="secondary" id="back">ë’¤ë¡œ</button>
        <button id="next">ë‹¤ìŒ</button>
      </div>
    </div>
  `;
  app.appendChild(el);

  el.querySelectorAll('.opt').forEach(btn=>{
    btn.onclick = () => {
      const v = +btn.dataset.v;
      const i = +btn.dataset.i;
      state.answers[key][i] = v;
      const group = el.querySelector(`.scale-btns[data-i="${i}"]`);
      group.querySelectorAll('.opt').forEach(b=>{
        const on = (+b.dataset.v === v);
        b.classList.toggle('active', on);
        b.setAttribute('aria-pressed', on ? 'true' : 'false');
      });
      el.querySelector(`#v-${key}-${i}`).textContent = String(v);
    };
  });

  el.querySelector('#next').onclick = () => {
    state.step = Math.min(5, state.step + 1);
    render();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };
  el.querySelector('#back').onclick = () => {
    state.step = Math.max(0, state.step - 1);
    render();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };
}

function computeAxis(axisKey){
  const arr = state.answers[axisKey].map(Number);
  const qs  = QUESTIONS[axisKey];
  const n   = arr.length;
  const mapped = arr.map((v,i)=> qs[i].pos ? v : (6 - v));
  const total = mapped.reduce((a,b)=>a+b,0);
  const mean5 = total / n;
  const neutral = 3 * n;
  const ax  = AXES.find(a=>a.key===axisKey);
  const pos = total > neutral; 
  return { mean: mean5, total, pos, code: pos ? ax.codePos : ax.codeNeg };
}

function buildCode(){
  const f=computeAxis('frame'), s=computeAxis('surface'), b=computeAxis('balance'), l=computeAxis('line');
  return {code:`${f.code}${s.code}${b.code}${l.code}`,scores:{frame:f,surface:s,balance:b,line:l}};
}

/* ========= ì˜· ê¶í•© ë¡œì§ ========= */
const ALL_CODES_ORDERED = [
  'BNLS','MNLC','MWLC','MWLS','MNLS','BNLC',
  'BWUC','BWUS','BWLC','BWLS','BNUS','MWUC',
  'MNUC','MNUS','MWUS','BNUC'
];

const PREFIX_GROUPS = {};
const SUFFIX_GROUPS = {};
for (const c of ALL_CODES_ORDERED) {
  const pre = c.slice(0,2);
  const suf = c.slice(2,4);
  (PREFIX_GROUPS[pre] ||= []).push(c);
  (SUFFIX_GROUPS[suf] ||= []).push(c);
}

const _SAFE = {
  ALL: (typeof ALL_CODES_ORDERED !== 'undefined' && Array.isArray(ALL_CODES_ORDERED)) ? ALL_CODES_ORDERED.slice() : [],
  TYPE_META: (typeof TYPE_META !== 'undefined') ? TYPE_META : {},
  axisPercent: (typeof axisPercent === 'function') ? axisPercent : (key) => ({ pct: 50 }),
  log: (...args) => { try { console.warn('[compat]', ...args); } catch(_){} },
};

const WEIGHTS = { tops: { frame:0.40, surface:0.10, balance:0.30, line:0.20 }, bottoms: { frame:0.10, surface:0.30, balance:0.40, line:0.20 } };
const MISMATCH_KEEP = { tops: { frame:0.50, surface:0.55, balance:0.35, line:0.60 }, bottoms: { frame:0.60, surface:0.45, balance:0.20, line:0.55 } };
const BASE_AFFINITY = { WAVE: { WAVE:1.00, NATURAL:0.92, STRAIGHT:0.85 }, NATURAL: { WAVE:0.92, NATURAL:1.00, STRAIGHT:0.90 }, STRAIGHT: { WAVE:0.85, NATURAL:0.90, STRAIGHT:1.00 } };

function sameLetter(a,b){ return a===b ? 1 : 0; }
function userFlex(axisKey){ const { pct } = _SAFE.axisPercent(axisKey); const dist = Math.abs((typeof pct === 'number' ? pct : 50) - 50) / 50; return 1 - dist; }
function decompose(code){ const [a,b,c,d] = (code || 'NNNN').split(''); const base = _SAFE.TYPE_META?.[code]?.base || 'NATURAL'; return { frame:a, surface:b, balance:c, line:d, base }; }
function patternBoost(codeA, codeB, mode){
  if(!codeA || !codeB) return 0;
  let match = 0; for (let i=0;i<4;i++) if(codeA[i]===codeB[i]) match++;
  const first2 = (codeA.slice(0,2) === codeB.slice(0,2));
  const last2  = (codeA.slice(2,4) === codeB.slice(2,4));
  const twoBoost = mode==='tops' ? (first2 ? 0.08 : (last2 ? 0.04 : 0)) : mode==='bottoms' ? (last2  ? 0.08 : (first2 ? 0.04 : 0)) : 0;
  return twoBoost + ((match>=3) ? 0.06 : 0);
}
function compatCore(codeA, codeB, mode){
  try {
    const wa = WEIGHTS[mode], keep = MISMATCH_KEEP[mode];
    const A = decompose(codeA), B = decompose(codeB);
    const sF = sameLetter(A.frame, B.frame) ? 1 : keep.frame;
    const sS = sameLetter(A.surface, B.surface) ? 1 : keep.surface;
    const sB = sameLetter(A.balance, B.balance) ? 1 : keep.balance;
    const sL = sameLetter(A.line, B.line) ? 1 : keep.line;
    const flexF = 0.7 + 0.3 * userFlex('frame');
    const flexS = 0.7 + 0.3 * userFlex('surface');
    const flexB = 0.7 + 0.3 * userFlex('balance');
    const flexL = 0.7 + 0.3 * userFlex('line');
    const num = wa.frame * sF * flexF + wa.surface * sS * flexS + wa.balance * sB * flexB + wa.line * sL * flexL;
    const den = wa.frame + wa.surface + wa.balance + wa.line || 1;
    return Math.max(0, Math.min(1, (num / den) * (BASE_AFFINITY[A.base]?.[B.base] ?? 0.92) + patternBoost(codeA, codeB, mode)));
  } catch (e) { return 0.55; }
}
function toPercent(x){ return Math.round(Math.max(0, Math.min(100, 55 + 43 * (isFinite(x) ? x : 0)))); }
function getShareCompatibility(code){
  try {
    const ALL = _SAFE.ALL.length ? _SAFE.ALL : [];
    const candidates = ALL.filter(c => c && c !== code);
    const tops = candidates.map(c => ({ code: c, score: toPercent( compatCore(code, c, 'tops') ) })).sort((a,b)=> b.score - a.score);
    const bottoms = candidates.map(c => ({ code: c, score: toPercent( compatCore(code, c, 'bottoms') ) })).sort((a,b)=> b.score - a.score);
    return { topsBest: tops[0] || null, topsNext: tops.slice(1, 6), bottomsBest: bottoms[0] || null, bottomsNext: bottoms.slice(1, 6), topsAll: tops.map(t=>t.code), bottomsAll: bottoms.map(b=>b.code) };
  } catch (e) { return { topsBest: null, topsNext: [], bottomsBest: null, bottomsNext: [], topsAll: [], bottomsAll: [] }; }
}
try { window.getShareCompatibility = getShareCompatibility; } catch(_){}

/* ============================
   ê²°ê³¼ í™”ë©´ ë Œë”ë§
============================ */
function pill(code){
  return `<button class="chip linklike" data-code="${code}" onclick="goDetails('${code}')">${code}</button>`;
}
function meter(pct){
  return `<div class="match-meter" aria-label="match ${pct}%"><i style="width:${pct}%"></i></div>`;
}

function shareRow({kind, lead, best, next}){
  if (!best) return '';
  const titleIco = kind === 'tops' ? 'ğŸ‘•' : 'ğŸ‘–';
  const titleTxt = kind === 'tops' ? 'TOPS ê¶í•©' : 'BOTTOMS ê¶í•©';
  const bestLabel = labelOf(best.code);

  return `
    <div class="match-row">
      <div class="match-title">${titleIco} ${titleTxt}</div>
      <p class="match-lead">${lead}</p>
      <div class="best-box">
        <div class="best-main">
          <div class="best-label">${bestLabel}</div>
          <div class="best-score">ğŸ’ ${best.score}%</div>
        </div>
        ${meter(best.score)}
        <div class="best-cta">
          <button class="btn primary small" onclick="goDetails('${best.code}')">ì´ íƒ€ì…ì˜ ì½”ë”” ë³´ê¸° â†’</button>
        </div>
      </div>
      ${next?.length ? `<div class="match-more muted small">ê·¸ ì™¸ ê¶í•© ì¢‹ì€ íƒ€ì…: ${next.map(x=>pill(x.code)).join('')}</div>` : ``}
    </div>
  `;
}

function renderShareCardHTML(code){
  const compat = getShareCompatibility(code);
  const topsLead = `ì´ ê³¨ê²©ì˜ ìœ ëª…ì¸ <b>ìƒì˜/ì•„ìš°í„°</b>ë„ ì°¸ê³ ê°€ ë¼ìš”! ì‹¤ë£¨ì—£ì´ë‚˜ ì–´ê¹¨, ëª© ì£¼ë³€ í˜•íƒœê°€ ë¹„ìŠ·í•œ íƒ€ì…ì…ë‹ˆë‹¤.`;
  const bottomsLead = `ì´ ê³¨ê²©ì˜ ìœ ëª…ì¸ <b>í•˜ì˜</b>ë„ ì°¸ê³ ê°€ ë¼ìš”! í—ˆë¦¬ ìœ„ì¹˜ë‚˜ ë–¨ì–´ì§€ëŠ” ëŠë‚Œ, ë¼ì¸ ì„¤ê³„ê°€ ë¹„ìŠ·í•œ íƒ€ì…ì…ë‹ˆë‹¤.`;

  return `
    <div class="card share-card cute" style="margin-top:16px">
      <h3>ğŸ«¶ ì˜ë¥˜ ì‰ì–´(ê³µìœ ) ê¶í•©</h3>
      <p class="muted small">ì• 2ê¸€ì ì¼ì¹˜=ìƒì˜/ì•„ìš°í„°, ë’¤ 2ê¸€ì ì¼ì¹˜=í•˜ì˜ ê¶í•©</p>
      ${shareRow({ kind:'tops', lead: topsLead, best: compat.topsBest, next: compat.topsNext })}
      ${shareRow({ kind:'bottoms', lead: bottomsLead, best: compat.bottomsBest, next: compat.bottomsNext })}
    </div>
  `;
}

function labelOf(code){
  const meta = (window.TYPE_META && TYPE_META[code]) || {};
  return `${meta.emoji ? meta.emoji + ' ' : ''}${meta.name || code} (${code})`;
}

const DETAIL_PAGE = 'detail-ko.html'; 
function goDetails(code){
  const url = DETAIL_PAGE ? `${DETAIL_PAGE}?code=${encodeURIComponent(code)}` : `gallery-ko.html?code=${encodeURIComponent(code)}`;
  location.href = url;
}

function renderBodyTipsHTML(code) {
  const t = BODY_TIPS[code];
  if (!t) return "";
  const li = arr => (arr || []).map(x => `<li>â€¢ ${x}</li>`).join('');
  const pastel = {BN: "#ffd6e8", BW: "#ffe8d6", MN: "#e8ffd6", MW: "#d6f3ff", B: "#f8e1ff", M: "#fff5d6"}[code.slice(0,2)] || "#f0f0f0";

  return `
  <div class="card cute-tips" style="--tone:${pastel}">
    <h3>ğŸ’– Body Balance Tips</h3>
    <p class="goal">ğŸ¯ ${t.goal}</p>
    <div class="tips-row">
      <div class="tips-col">
        <h4>ğŸ ì‹ë‹¨</h4>
        <p class="label">ì¶”ì²œ!</p><ul>${li(t.diet_do)}</ul>
        <p class="label">ì£¼ì˜!</p><ul>${li(t.diet_avoid)}</ul>
      </div>
      <div class="tips-col">
        <h4>ğŸƒâ€â™€ï¸ ìš´ë™</h4>
        <p class="label">ê·¼ë ¥ ìš´ë™</p><ul>${li(t.train_strength)}</ul>
        <p class="label">ìœ ì‚°ì†Œ</p><ul>${li(t.train_cardio)}</ul>
      </div>
    </div>
    <div class="tips-extra">
      <h4>ğŸ§˜â€â™€ï¸ ì¼€ì–´ãƒ»ìì„¸</h4>
      <ul>${li(t.mobility)}${li(t.care)}</ul>
      <p class="quick"><b>âœ¨Quick Win:</b> ${t.quick}</p>
    </div>
  </div>`;
}

function _renderResultCore(){
  const {code,scores}=buildCode();
  const meta=TYPE_META[code]||{name:'ë¯¸ì •ì˜ íƒ€ì…',base:'-',emoji:'',animal:'',image:'',concept:'',brandHints:[],styleNotes:[]};
  document.body.dataset.theme = meta.base;
  
  if (!state._sentOnce) {
    state._sentOnce = true;
    const sid = localStorage.getItem('km_session') || (localStorage.setItem('km_session', (crypto?.randomUUID?.() ?? String(Math.random()))), localStorage.getItem('km_session'));
    sendToSheets({ code, scores, userAgent: navigator.userAgent, sessionId: sid, t: Date.now() });
  }

  const el=document.createElement('div');
  const bodyDesc=describeBodyByCode(code);
  const brands=meta.brandHints?.length?meta.brandHints:autoBrands(code,meta.base);
  const auto=autoStyle(code); 
  const brandPack = BRAND_BY_TYPE[code]; 
  const groupHTML = brandPack ? `
  <div class="brand-groups">
    <div class="brand-group"><h4>í•˜ì´ ë¸Œëœë“œ</h4><div class="chips">${brandPack.high.map(x=>`<span class="chip">${x}</span>`).join('')}</div></div>
    <div class="brand-group"><h4>ë¯¸ë“¤ ë¸Œëœë“œ</h4><div class="chips">${brandPack.middle.map(x=>`<span class="chip">${x}</span>`).join('')}</div></div>
    <div class="brand-group"><h4>SPA/íŒ¨ìŠ¤íŠ¸</h4><div class="chips">${brandPack.fast.map(x=>`<span class="chip">${x}</span>`).join('')}</div></div>
  </div>` : '';

  const notes=(meta.styleNotes?.length?meta.styleNotes:[]);
  const nick = nickOf(code);
  const why  = whyOf(code);

  const pf = axisPercent('frame');
  const ps = axisPercent('surface');
  const pb = axisPercent('balance');
  const pl = axisPercent('line');

  let celebHTML = '';
  if (meta.celebrities) {
    const { jp = [], kr = [], global = [] } = meta.celebrities;
    const group = [
      { label: 'ğŸ‡°ğŸ‡· í•œêµ­', list: kr },
      { label: 'ğŸ‡¯ğŸ‡µ ì¼ë³¸', list: jp },
      { label: 'ğŸŒ ê¸€ë¡œë²Œ', list: global },
    ];
    celebHTML = `
      <div class="card guide" style="margin-top:12px">
        <h3>ëŒ€í‘œì ì¸ ì—°ì˜ˆì¸</h3>
        ${group.map(g=> g.list.length ? `<h4>${g.label}</h4><div class="chips">${g.list.map(x=>`<span class="chip">${x}</span>`).join('')}</div>` : '').join('')}
        <p class="small">â€» ê° íƒ€ì…ì˜ ì—°ì˜ˆì¸ ë¶„ë¥˜ëŠ” ê³µì‹ì ì¸ ê²ƒì´ ì•„ë‹ˆë©°, ìŠ¤íƒ€ì¼ë§ ê²½í–¥ì— ê¸°ë°˜í•œ ì°¸ê³  ì˜ˆì‹œì…ë‹ˆë‹¤.</p>
      </div>
    `;
  }

  const barsHTML = `
    <div class="traits">
      ${[
      { key:'Frame',   ax:AXES[0], data:pf },
      { key:'Surface', ax:AXES[1], data:ps },
      { key:'Balance', ax:AXES[2], data:pb },
      { key:'Line',    ax:AXES[3], data:pl },
      ].map(({ key, ax, data }) => {
        const pctRaw  = data.pct;
        const offset  = pctRaw - 50;
        const absPct  = Math.abs(offset);
        const mainPct = pctRaw >= 50 ? pctRaw : 100 - pctRaw;
        const sideLabel = data.sideLabel.replace(/\(.*?\)/g, ''); 
        const isRight   = offset >= 0;
        const fillLeft  = isRight ? '50%' : `calc(50% - ${absPct}%)`;
        const fillWidth = `${absPct}%`;
        const thumbLeft = `calc(50% + ${offset}%)`;

        return `
          <div class="trait">
            <div class="row">
              <div class="title">${key}: <span class="${isRight ? 'ok' : 'warn'}">${Math.round(mainPct)}% ${sideLabel}</span></div>
              <div class="percent">${Math.round(mainPct)}%</div>
            </div>
            <div class="central-meter">
              <div class="axis-line"></div>
              <div class="fill" style="left:${fillLeft}; width:${fillWidth};"></div>
              <div class="thumb" style="left:${thumbLeft};"></div>
            </div>
            <div class="ends"><span>${ax.negLabel}</span><span>${ax.posLabel}</span></div>
          </div>`;
      }).join('')}
    </div>
  `;

  el.innerHTML=`
    <div class="cols">
      <div class="card result">
        <h2>ì§„ë‹¨ ê²°ê³¼: <span class="ok">${code}</span> â€” <span class="em">${meta.emoji||''}</span> ${meta.name}</h2>
        <div class="tags">
          <span class="tag">ê¸°ë°˜ ì²´í˜•: ${baseLabel(meta.base)}</span>
          ${meta.animal?`<span class="tag">Motif: ${meta.animal}</span>`:''}
          <span class="tag kind">${nick}</span> 
        </div>
        <div class="hero-image" data-base="${meta.base}">
          <img src="${meta.image || `images/${code}.jpg`}" alt="${code} image" loading="lazy" onerror="this.closest('.hero-image')?.classList.add('is-missing')"/>
        </div>
        <p class="concept">${meta.concept||''}</p>
        <p class="muted">4ì¶• í‰ê·  ìŠ¤ì½”ì–´</p>
        ${barsHTML}
        
        <div class="card guide" style="margin-top:12px">
          <h3>ì–´ë–¤ ê³¨ê²©?</h3>
          <p>${bodyDesc}</p>
          <h3>ì–´ìš¸ë¦¬ëŠ” ë¸Œëœë“œ</h3>
          <div class="chips brand-chips">${brands.map(b=>`<span class="chip" title="${b}">${b}</span>`).join('')}</div>
          ${groupHTML}
          <div class="card guide" style="margin-top:12px">
            <h3>ëª¨í‹°ë¸Œì— ë‹´ê¸´ ì˜ë¯¸</h3>
            <p>${why}</p>
          </div>

          <div class="blur-container">
            <div class="blur-content">
              <h3>ìŠ¤íƒ€ì¼ë§ ê°€ì´ë“œ</h3>
              <div class="cols" style="grid-template-columns:1fr 1fr">
                <div>
                  <h4>ì†Œì¬/ì§ˆê°</h4><ul>${auto.fabric.map(x=>`<li>${x}</li>`).join('')}</ul>
                  <h4>ë„¥ ë¼ì¸</h4><ul>${auto.neck.map(x=>`<li>${x}</li>`).join('')}</ul>
                </div>
                <div>
                  <h4>ì‹¤ë£¨ì—£</h4><ul>${auto.silhouette.map(x=>`<li>${x}</li>`).join('')}</ul>
                  <h4>ë¼ì¸ ì„¤ê³„</h4><ul>${auto.lines.map(x=>`<li>${x}</li>`).join('')}</ul>
                </div>
              </div>
              ${notes.length?`<h4>íƒ€ì… ê³ ìœ  ë©”ëª¨</h4><ul>${notes.map(n=>`<li>${n}</li>`).join('')}</ul>`:''}
              ${renderBodyTipsHTML(code)}
            </div>

            <div class="lock-overlay">
              <div class="lock-icon">ğŸ”’</div>
              <div class="lock-msg">í”„ë¦¬ë¯¸ì—„ ë¦¬í¬íŠ¸ í•œì •!</div>
              <button class="unlock-btn" onclick="document.getElementById('buy-premium').click()">
                âœ¨ ì§€ê¸ˆ ì ê¸ˆ í•´ì œí•˜ê¸° (â‚©3,000)
              </button>
            </div>
          </div>
          ${celebHTML}
          ${renderShareCardHTML(code)}
          <p class="small">â€» ì œì•ˆì€ ê° ì¶•(ê³¨ê²©/ë©´ì /ì¤‘ì‹¬/ë¼ì¸) ìŠ¤ì½”ì–´ì™€ íƒ€ì… ê³ ìœ  ì •ë³´ì—ì„œ ìƒì„±ë©ë‹ˆë‹¤.</p>
        </div>

        <div class="card" style="margin-top:20px; text-align:center;">
          <div class="premium-cta">
            <div class="premium-ribbon">PREMIUM</div>
            <h3>ğŸ’« ì™„ì „íŒ ë¦¬í¬íŠ¸ ğŸ’«</h3>
            <p class="premium-desc">"ë‚˜ë§Œì„ ìœ„í•œ" <b>ì´ˆì •ë°€ í• ë¶„ì„</b> ğŸ‘—<br><b>ìµœì  ì½”ë”” ê¶í•©</b>ãƒ»<b>ì•„ì´í…œ ì§„ë‹¨</b>ãƒ»<b>ì»¬ëŸ¬ ì œì•ˆ</b> ğŸ¨<br>í–¥í›„ ì—…ë°ì´íŠ¸ë„ <b>í‰ìƒ ë¬´ì œí•œ</b>!</p>
            <button class="premium-btn" id="buy-premium">âœ¨ â‚©3,000ìœ¼ë¡œ ì™„ì „íŒ ë³´ê¸° âœ¨</button>
            <p class="premium-note">â€» í•œë²ˆ êµ¬ë§¤í•˜ë©´ í‰ìƒ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
          </div>
          <div class="card" style="margin-top:12px; text-align:center;">     
            <h3>ë‹¤ë¥¸ ê³¨ê²© íƒ€ì…ë„ ë³´ê¸°</h3>
            <p>ë‹¹ì‹ ì˜ íƒ€ì… ì´ì™¸ì˜ 15ê°€ì§€ íƒ€ì…ì„ ë¹„êµí•´ ë³´ì„¸ìš”.</p>
            <a href="gallery-ko.html" class="btn" style="display:inline-block; background:#333; color:white; padding:10px 20px; border-radius:8px; text-decoration:none;">íƒ€ì… ê°¤ëŸ¬ë¦¬ ë³´ê¸° â†’</a>
          </div>
          <div class="share-box">
            <h3 style="margin-top:0;">ê²°ê³¼ ê³µìœ í•˜ê¸°</h3>
            <div class="share-buttons">
              <button class="share-btn" id="btn-x">X(Twitter) ê³µìœ </button>
              <button class="share-btn" id="btn-line">LINE ì „ì†¡</button>
              <button class="share-btn" id="btn-copy">ë§í¬ ë³µì‚¬</button>
            </div>
            <div class="controls">
              <button id="retry" class="secondary">ë‹¤ì‹œ í•˜ê¸°</button>
            </div>
          </div>
          <div class="card">
            <h3>íƒ€ì… ê·¸ë£¹ í•´ì„¤</h3>
            <ul>
              <li><b>WAVE</b>: ë¶€ë“œëŸ¬ì›€Â·ê°€ë²¼ì›€Â·í•˜ì²´ì¤‘ì‹¬Â·ê³¡ì„  (ğŸ©° Airy / Gentle / Dreamlike)</li>
              <li><b>NATURAL</b>: ê³¨ê²©ê°Â·ì§ì„ Â·ë„“ì€ í”„ë ˆì„ (ğŸŒ¿ Calm / Organic / Minimal)</li>
              <li><b>STRAIGHT</b>: ë‘ê»˜ê°Â·ì…ì²´ê°Â·ìƒì²´ì¤‘ì‹¬Â·ì§ì„  (ğŸ–¤ Modern / Powerful / Elegant)</li>
            </ul>
          </div>
        </div>
      </div>
  `;

  app.appendChild(el);

  // ê³µìœ  ë²„íŠ¼ ë¡œì§
  (() => {
    const { code } = buildCode();
    const meta = TYPE_META[code] || { name:'', emoji:'' };
    const shareTitle = `${meta.emoji ?? ''} ${meta.name || code} (${code})`;
    const shareUrl   = new URL('index-ko.html', location.href).href;

    const bx = document.getElementById('btn-x');
    if (bx) bx.onclick = () => {
      const t = encodeURIComponent(`ê³¨ê²© MBTI ì§„ë‹¨ ê²°ê³¼ëŠ” ã€Œ${shareTitle}ã€ì˜€ìŠµë‹ˆë‹¤!`);
      const u = encodeURIComponent(shareUrl);
      window.open(`https://twitter.com/intent/tweet?text=${t}&url=${u}`, '_blank');
    };
    const bl = document.getElementById('btn-line');
    if (bl) bl.onclick = () => {
      const t = encodeURIComponent(`ê³¨ê²© MBTI ì§„ë‹¨ ê²°ê³¼ëŠ” ã€Œ${shareTitle}ã€ì˜€ìŠµë‹ˆë‹¤!\n${shareUrl}`);
      window.open(`https://line.me/R/msg/text/?${t}`, '_blank');
    };
    const bc = document.getElementById('btn-copy');
    if (bc) bc.onclick = () => {
      navigator.clipboard.writeText(shareUrl).then(()=>alert('ë§í¬ë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤'));
    };
  })();

  const buyBtn = document.querySelector('#buy-premium');
  if (buyBtn){
    buyBtn.addEventListener('click', () => {
      // 1. å†å–å¾—
      const { code: currentCode, scores: currentScores } = buildCode();
      const currentAnswers = state?.answers || {};

      if (!currentCode) { 
        alert('ì§„ë‹¨ ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'); 
        return; 
      }

      // 2. ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¸ä¿å­˜
      localStorage.setItem('bp_code', currentCode);
      localStorage.setItem('bp_scores', JSON.stringify(currentScores || {}));
      localStorage.setItem('bp_answers', JSON.stringify(currentAnswers || {}));

      // ã€é‡è¦ã€‘æ—¥æœ¬èªç‰ˆã«ã‚ã‚‹ã€Œkm_pending_payloadã€ã‚’å¿…ãšä¿å­˜ã™ã‚‹
      localStorage.setItem('km_pending_payload', JSON.stringify({
        code: currentCode,
        scores: currentScores || {},
        answers: currentAnswers || {},
        sessionId: (crypto?.randomUUID?.() ?? String(Math.random()))
      }));

      // 3. Stripeã¸é·ç§»ï¼ˆæœ¬ç•ªç”¨ãƒªãƒ³ã‚¯ï¼‰
      location.href = "https://buy.stripe.com/7sY14nf7f5Xg3HP7fH8k801";
    });
  }

  document.getElementById('retry')?.addEventListener('click', () => {
    if(confirm('ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì§„ë‹¨í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')){
       state = makeInitialState();
       render();
       window.scrollTo({top:0});
    }
  });
}

function renderResult(){ _renderResultCore(); }

function baseLabel(b){
  return b==='WAVE'?'WAVE (ë¶€ë“œëŸ¬ì›€/ê°€ë²¼ì›€/í•˜ì²´ì¤‘ì‹¬)'
       : b==='STRAIGHT'?'STRAIGHT (ë‘ê»˜ê°/ì…ì²´ê°/ìƒì²´ì¤‘ì‹¬)'
       : b==='NATURAL'?'NATURAL (ê³¨ê²©ê°/ì§ì„ /ëŸ¬í”„)' : b;
}

render();

function axisPercent(axisKey){
  const arr = state.answers[axisKey].map(Number);
  const qs  = QUESTIONS[axisKey];
  const normalized = arr.map((v,i)=>{
    const s = (v-1)/4;          
    return qs[i].pos ? s : (1-s);
  });
  const avg = normalized.reduce((a,b)=>a+b,0)/normalized.length; 
  const pct = Math.round(avg*100); 
  const ax = AXES.find(a=>a.key===axisKey);
  const sideLabel = (pct>50) ? ax.posLabel : ax.negLabel;
  return { pct, sideLabel, posSide: pct>50 };
}
</script>

<script>
window.addEventListener('DOMContentLoaded', function(){
  const openBtn = document.getElementById('navOpen');
  const closeBtn = document.getElementById('navClose');
  const drawer = document.getElementById('drawer');
  const scrim = document.getElementById('scrim');
  if(!openBtn || !closeBtn || !drawer || !scrim) return;
  function open(){ drawer.classList.add('open'); drawer.setAttribute('aria-hidden','false'); openBtn.setAttribute('aria-expanded','true'); scrim.hidden = false; document.documentElement.style.overflow = 'hidden'; }
  function close(){ drawer.classList.remove('open'); drawer.setAttribute('aria-hidden','true'); openBtn.setAttribute('aria-expanded','false'); scrim.hidden = true; document.documentElement.style.overflow = ''; }
  openBtn.addEventListener('click', open, { passive: true });
  closeBtn.addEventListener('click', close, { passive: true });
  scrim.addEventListener('click', close, { passive: true });
  window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') close(); });
});
</script>
</body>
</html>
